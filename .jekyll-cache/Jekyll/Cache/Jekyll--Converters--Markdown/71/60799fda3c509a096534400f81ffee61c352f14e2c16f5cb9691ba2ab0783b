I"<h2 id="ëª©ì°¨">ëª©ì°¨</h2>

<p><a href="#list1">1. DevSecOps íˆ´ì²´ì¸ ë³´ì•ˆ ì ê²€ ë¦¬ìŠ¤íŠ¸</a></p>

<p><a href="#list1_1">Â Â  1.1. SANS DevSecOps Best Practice</a></p>

<p><a href="#list1_2">Â Â  1.2. Pre-Commit ë‹¨ê³„</a></p>

<p><a href="#list1_3">Â Â  1.3. Commit ë‹¨ê³„</a></p>

<p><a href="#list2">2. SAST(Static Application Security Testing) ì ìš©</a></p>

<p><a href="#list2_1">Â Â  2.1. OWASP Dependency Check</a></p>

<p><a href="#list2_2">Â Â  2.2. SpotBugs</a></p>

<p><a href="#list2_3">Â Â  2.3. CheckStyle</a></p>

<p><a href="#list2_4">Â Â  2.4. PMD(Programing Mistake Detector)</a></p>

<p><a href="#list2_5">Â Â  2.5. SonarQube</a></p>

<p><a href="#list2_6">Â Â  2.6. Anchore</a></p>

<p><br /></p>

<hr />

<h2 id="1-devsecops-íˆ´ì²´ì¸-ë³´ì•ˆ-ì ê²€-ë¦¬ìŠ¤íŠ¸---"><span style="color:purple"><strong>1. DevSecOps íˆ´ì²´ì¸ ë³´ì•ˆ ì ê²€ ë¦¬ìŠ¤íŠ¸</strong></span>   <a name="list1"></a></h2>

<p><br /></p>

<ul>
  <li>
    <p><strong>SANS DevSecOps Best Practice</strong>   <a name="list1_1"></a></p>

    <p>SANS ì—°êµ¬ì†Œ(SANS Institute)ëŠ” êµìœ¡ì—ì„œ ë³´ì•ˆ ì¸ì¦ ì •ë³´ ì†ŒìŠ¤ë¥¼ ë³´ìœ í•˜ê³  ìˆìœ¼ë©° ì‚¬ì´ë²„ ë° ë„¤íŠ¸ì›Œí¬ ë°©ì–´, ì¹¨íˆ¬ í…ŒìŠ¤íŠ¸, ì‚¬ê³  ëŒ€ì‘, ë””ì§€í„¸ í¬ë Œì‹ ë“± ë³´ì•ˆ êµìœ¡ì— ìˆì–´ êµ­ì œì ìœ¼ë¡œ ê°€ì¥ ë†’ì€ ì‹ ë¢°ë¥¼ ë°›ëŠ” ë³´ì•ˆ ê¸°ê´€ì´ë‹¤.</p>

    <p>ì´ëŸ¬í•œ SANS ì—°êµ¬ì†Œì—ì„œ DevSecOps ë„êµ¬ë“¤ì„ ë¶„ë¥˜ ë° ì •ë¦¬í•˜ì—¬ ë°œí‘œí•œ <a href="http://sans.org/u/zAi">Secure DevOps Toolchain and SWAT checklist</a> ìë£Œë¥¼ í† ëŒ€ë¡œ DevSecOps íŒŒì´í”„ë¼ì¸ì—ì„œ ì •ì  ë¶„ì„í•  ë„êµ¬ë¥¼ ì„ ì •í•  ê²ƒì´ë‹¤.</p>

    <p>ë„êµ¬ ì„ ì •ì€ ì•ì„  í¬ìŠ¤íŒ…ì„ í†µí•´ êµ¬ì¶•ëœ DevOps íŒŒì´í”„ë¼ì¸ì— ì‰½ê²Œ ì—°ê²°í•  ìˆ˜ ìˆê³ , ìë™í™”ë˜ì–´ ì •ì  ë¶„ì„ ë° ë™ì  ë¶„ì„ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë³´ì•ˆ ë„êµ¬ë¥¼ ì„ íƒí–ˆë‹¤.</p>

    <p><br /></p>
  </li>
  <li>
    <p><strong>Pre-Commit ë‹¨ê³„</strong>   <a name="list1_2"></a></p>

    <p>ë¨¼ì € DevSecOps íŒŒì´í”„ë¼ì¸ì˜ ì²« ë²ˆì§¸ ë‹¨ê³„ì¸ Pre-Commit ë‹¨ê³„ì—ì„œëŠ” ê°œë°œìê°€ ì½”ë“œë¥¼ GitLabê³¼ ê°™ì€ SCMì— Commit ë˜ê¸° ì „ì— ì™„ë£Œí•´ì•¼í•˜ëŠ” ë‹¨ê³„ì´ë‹¤.</p>

    <p>ë‹¤ìŒ [ê·¸ë¦¼ 1]ì€ SANS ì—°êµ¬ì†Œì—ì„œ ì •ë¦¬í•œ Pre-Commit ë‹¨ê³„ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë³´ì•ˆ ë„êµ¬ë“¤ì„ ì •ë¦¬í•œ ê²ƒì´ë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/project/devsecops_6_1.png" alt="pre_commit_security_tool" width="758" height="273" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 1] Pre-Commit ë‹¨ê³„ì˜ ë³´ì•ˆ ë„êµ¬</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>Pre-Commit ë‹¨ê³„ëŠ” VSCodeì™€ ê°™ì€ IDE(Integrated Development Environment)ì— ë³´ì•ˆ ë„êµ¬ë“¤ì„ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ì¶”ê°€í•˜ì—¬ ê°œë°œìê°€ ì½”ë“œë¥¼ ì‘ì„± ë° ì‹¤í–‰í•˜ë©´ì„œ ë³´ì•ˆì„ ê²€ì‚¬í•œë‹¤.</p>

    <p>ì•ì„  í¬ìŠ¤íŒ…ì—ì„œ êµ¬ì„±í•œ DevOps íŒŒì´í”„ë¼ì¸ì€ GitLabì— í‘¸ì‹œí•˜ëŠ” ì´ë²¤íŠ¸ë¡œ ì¸í•´ ì‹¤í–‰ë˜ëŠ”ë°, Pre-Commit ë‹¨ê³„ëŠ” í‘¸ì‹œ ì´ì „ì— ìˆ˜í–‰ë˜ëŠ” ì‘ì—…ì´ê¸° ë•Œë¬¸ì— DevSecOps íŒŒì´í”„ë¼ì¸ì— ì¶”ê°€í•  ë„êµ¬ëŠ” ì—†ë‹¤.</p>

    <p><br /></p>
  </li>
  <li>
    <p><strong>Commit ë‹¨ê³„</strong>   <a name="list1_3"></a></p>

    <p>ë‹¤ìŒìœ¼ë¡œ ì½”ë“œë¥¼ ì»´íŒŒì¼í•˜ê³  ë¹Œë“œí•˜ëŠ” ê³¼ì •ì—ì„œ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” Commit ë‹¨ê³„ì´ë‹¤.</p>

    <p>[ê·¸ë¦¼ 2]ëŠ” SANS ì—°êµ¬ì†Œì—ì„œ ì •ë¦¬í•œ Commit ë‹¨ê³„ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë³´ì•ˆ ë„êµ¬ë“¤ì„ ì •ë¦¬í•œ ê²ƒì´ë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/project/devsecops_6_2.png" alt="commit_security_tool" width="714" height="308" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 2] Commit ë‹¨ê³„ì˜ ë³´ì•ˆ ë„êµ¬</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>Commit ë‹¨ê³„ëŠ” ë¹Œë“œí•˜ê³  í…ŒìŠ¤íŠ¸í•˜ëŠ” ê³¼ì •ì—ì„œ íŒŒì´í”„ë¼ì¸ì˜ ë³´ì•ˆ ì·¨ì•½ì ì„ ì°¾ê¸° ìœ„í•´ ì†ŒìŠ¤ ì½”ë“œ íŒŒì¼ë“¤ì„ ìŠ¤ìº”í•œë‹¤.</p>

    <p>ê²€ì‚¬í•  ì†ŒìŠ¤ ì½”ë“œì˜ ì–¸ì–´ì— ë”°ë¼ ì‚¬ìš©ë˜ëŠ” ë„êµ¬ë“¤ì€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤.</p>

    <p>ë³¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” Java ê¸°ë°˜ì˜ ì›¹ ì„œë¹„ìŠ¤ì— ë³´ì•ˆì„ ì ìš©í•´ë³¼ ê²ƒì´ê³ , ì •ì  ë¶„ì„ì— ì‚¬ìš©í•  ë„êµ¬ë“¤ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

    <p><br /></p>

    <ol>
      <li>
        <p>OWASP Dependency Check</p>

        <p><strong>í”„ë¡œì íŠ¸ì˜ ì¢…ì†ì„±ì„ ê²€ì‚¬</strong>í•˜ê³ , ê³µê°œì ìœ¼ë¡œ ê³µê°œ ëœ ì·¨ì•½ì ì„ íƒì§€í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ êµ¬ì„± ë¶„ì„ ë„êµ¬ì´ë‹¤.</p>

        <p>ì§€ì •ëœ ì¢…ì†ì„±ì— ëŒ€í•œ CPE(Common Platform Enumeration) ì‹ë³„ìê°€ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ê³ , ë°œê²¬ë˜ë©´ ê´€ë ¨ CVE í•­ëª©ì— ì—°ê²°ë˜ëŠ” ë³´ê³ ì„œë¥¼ ìƒì„±í•´ì¤€ë‹¤.</p>

        <p>Jenkinsì™€ Maven í”ŒëŸ¬ê·¸ì¸ì´ ì¡´ì¬í•˜ì—¬ ì—°ë™í•˜ê¸° ì‰½ë‹¤.</p>

        <p><br /></p>
      </li>
      <li>
        <p>SpotBugs</p>

        <p>ì •ì  ë¶„ì„ ë„êµ¬ë¡œ ì‚¬ìš©ë˜ëŠ” FindBugsê°€ ì´ì œëŠ” SpotBugsë¡œ ë°”ë€Œì–´ ì‚¬ìš©ë˜ê³  ìˆë‹¤.</p>

        <blockquote>
          <p>ê´€ë ¨ ë‚´ìš©ì€ <a href="https://github.com/findbugsproject/findbugs/blob/master/README.md">FindBugs README</a>ì—ì„œ í™•ì¸ ê°€ëŠ¥</p>
        </blockquote>

        <p>ì œí•œëœ ë£° ì…‹(Rule Set)ìœ¼ë¡œ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•˜ì—¬ ê²°í•¨ì„ í™•ì¸í•˜ê³  ìƒì„±ëœ ë³´ê³ ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

        <p><br /></p>
      </li>
      <li>
        <p>CheckStyle</p>

        <p>ì½”ë”© ìŠ¤íƒ€ì¼ ê·œì¹™ì„ ì •ì˜í•˜ì—¬ ì²´í¬í•´ì¤Œìœ¼ë¡œì¨ ì½”ë”© ìŠ¤íƒ€ì¼ í†µì¼í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.</p>

        <p>í”„ë¡œì íŠ¸ ì™„ë£Œ í›„ ìœ ì§€ë³´ìˆ˜í•  ë–„ ìƒê²¨ë‚˜ëŠ” ë§ì€ ë¬¸ì œì¤‘ í•˜ë‚˜ê°€ ë§ì€ í”„ë¡œê·¸ë˜ë¨¸ë“¤ì´ ê°ìì˜ ì·¨í–¥ì— ë”°ë¼ ë³€ìˆ˜ëª…, ë©”ì†Œë“œëª…, ì‘ì„±ë²•ë“±ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ”ë° ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì¡Œë‹¤.</p>

        <p>[ê·¸ë¦¼ 2]ì— ë³´ì´ëŠ” SANS ì—°êµ¬ì†Œì˜ ìë£Œì—ëŠ” CheckStyleì´ ì—†ì§€ë§Œ SpotBugsì™€ ë”ë¶ˆì–´ PMDì™€ë„ ê°™ì´ ì •ì  ë¶„ì„ ë„êµ¬ë¡œ ë§ì´ ì“°ì´ê³  ìˆì–´ ì‚¬ìš©í•´ë³´ì•˜ë‹¤.</p>

        <p><br /></p>
      </li>
      <li>
        <p>PMD(Programing Mistake Detector)</p>

        <p>SpotBugsì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì‘ìš© í”„ë¡œê·¸ë¨ì—ì„œ Java ì†ŒìŠ¤ë¥¼ ì •ì  ë¶„ì„í•˜ì—¬ ë°œê²¬ëœ ë¬¸ì œë¥¼ ë³´ê³ í•´ì¤€ë‹¤.</p>

        <p>ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µë˜ëŠ” ë£° ì…‹(Rule Set)ì´ í¬í•¨ë˜ì–´ ìˆìœ¼ë©° ì‚¬ìš©ì ì§€ì • ê·œì¹™ì„ ì‘ì„±í•  ìˆ˜ë„ ìˆë‹¤.</p>

        <p><br /></p>
      </li>
      <li>
        <p>SonarQube</p>

        <p>SonarQubeëŠ” 20ê°œ ì´ìƒì˜ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œ Bugs, Code Smell, ë³´ì•ˆ ì·¨ì•½ì ì„ ë°œê²¬í•  ëª©ì ìœ¼ë¡œ ì •ì  ì½”ë“œ ë¶„ì„ìœ¼ë¡œ ìë™ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ì§€ì†ì ì¸ ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ìš© ì˜¤í”ˆ ì†ŒìŠ¤ í”Œë«í¼ì´ë‹¤.</p>

        <p>SonarQubeëŠ” ìì²´ ë¶„ì„ê¸°ë¡œ ëª¨ë“  ê·œì¹™ì„ ë‹¤ë£° ìˆ˜ ìˆë‹¤ê³  ê°€ì •í•˜ì§€ë§Œ SonarQubeì—ì„œ ë‹¤ë£¨ì§€ ì•ŠëŠ” Findbugs, PMD ë˜ëŠ” CheckStyleì˜ ê·œì¹™ì´ ì—¬ì „íˆ ìˆë‹¤.</p>

        <p>SonarQube ìì²´ë¡œë„ ì¢‹ì§€ë§Œ PMD/Findbugs/Checkstyleì„ ë³„ë„ë¡œ ì‚¬ìš©í•˜ê³  Jenkins CIì—ì„œ ê°€ì‹œì ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” Analysis Collector í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.</p>

        <p>ì´ê²ƒì˜ ì¥ì ì€ PMD/Findbugs/Checkstyle êµ¬ì„±ì„ SCMì— ì²´í¬ì¸í•˜ê³  ë³„ë„ì˜ Sonar ì„œë²„ì— ì˜ì¡´í•˜ì§€ ì•Šê³  Maven ë¹Œë“œì— í†µí•© í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.</p>

        <blockquote>
          <p>ì˜¤ë˜ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬(ì˜ˆ: Java 8ì˜ ê²½ìš°)ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ ì—…ê·¸ë ˆì´ë“œ í˜¹ì€ ëŒ€ê¸°í•˜ëŠ” ë° ì‹œê°„ì„ ì†Œë¹„í•˜ê²Œ ë˜ê¸° ë•Œë¬¸ì— SonarQubeëŠ” í˜„ì¬ PMD, Checkstyle ë° Findbugë¥¼ íê¸°í•˜ê³  ìì²´ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ <a href="https://redirect.sonarsource.com/plugins/java.html">SonarJava</a>ë¥¼ ë¶„ì„ ë° ê°œë°œí•˜ëŠ” ì¤‘ì´ë¼ê³  í•¨ 
ë˜í•œÂ <a href="http://www.sonarlint.org/index.html">SonarLint</a>Â ë¼ëŠ” ê°œì¸ IDE ìš© ìƒˆ í”ŒëŸ¬ê·¸ì¸ì´ ì¡´ì¬</p>
        </blockquote>

        <p>SonarQubeì—ëŠ” <code class="highlighter-rouge">í’ˆì§ˆ í”„ë¡œíŒŒì¼(Quality Profiles)</code>, <code class="highlighter-rouge">í’ˆì§ˆ ê²Œì´íŠ¸(Quality Gates)</code>ë¼ëŠ” ì •ì±…ì´ ì¡´ì¬í•œë‹¤.</p>

        <ul>
          <li>
            <p><strong>í’ˆì§ˆ í”„ë¡œíŒŒì¼(Quality Profiles)</strong></p>

            <p>ì½”ë“œë¥¼ ë¶„ì„í•˜ê¸° ìœ„í•œ ë£°(Rule)ì˜ ì§‘í•©ì´ë‹¤.</p>

            <p>ê° ì–¸ì–´ë§ˆë‹¤ ë‹¤ë¥¸ í’ˆì§ˆ í”„ë¡œíŒŒì¼ë“¤ì´ ì¡´ì¬í•œë‹¤.</p>
          </li>
          <li>
            <p><strong>í’ˆì§ˆ ê²Œì´íŠ¸(Quality Gates)</strong></p>

            <p>í”„ë¡œì íŠ¸ ì§€í‘œë“¤ë¡œ ì„¤ì •ëœ ì„ê³„ ê°’ì„ ì •í•œë‹¤.</p>

            <p>í’ˆì§ˆ ê²Œì´íŠ¸ë¥¼ í†µê³¼í•˜ê¸° ìœ„í•´ì„œëŠ” ëª¨ë“  ì„ê³„ê°’ ì¡°ê±´ì„ í†µê³¼í•´ì•¼ í•œë‹¤.</p>

            <p><br /></p>
          </li>
        </ul>
      </li>
      <li>
        <p>Anchore</p>

        <p>AnchoreëŠ” ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ìŠ¤ìºë‹ ë„êµ¬ì´ë‹¤.</p>

        <p>ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•  ë•Œë§ˆë‹¤ ì•Œë ¤ì§„ ë³´ì•ˆ ì·¨ì•½ì ì„ ìŠ¤ìº”í•´ì„œ ë³´ì•ˆì ì¸ ë¬¸ì œê°€ ì—†ëŠ”ì§€ ë¶„ì„í•œë‹¤.</p>

        <p>ìƒì—… ë²„ì „ë„ ì¡´ì¬í•˜ì§€ë§Œ ì˜¤í”ˆ ì†ŒìŠ¤ ë²„ì „ì´ ìˆì–´ ì†ì‰½ê²Œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.</p>

        <p>AnchoreëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë³´ì•ˆ CVE(Common Vulnerabilities and Exposures) ëª©ë¡ì„ ê¸°ë°˜ìœ¼ë¡œ í•´ì„œ ìŠ¤ìº”í•˜ê³ , NPMê³¼ ë£¨ë¹„ì ¬ì— ëŒ€í•œ ë³´ì•ˆ ì·¨ì•½ì  í”¼ë“œë„ ê°€ì ¸ì˜¨ë‹¤.</p>

        <p><br /></p>
      </li>
    </ol>
  </li>
</ul>

<hr />

<h2 id="2-saststatic-application-security-testing-ì ìš©---"><span style="color:purple"><strong>2. SAST(Static Application Security Testing) ì ìš©</strong></span>   <a name="list2"></a></h2>

<p><br /></p>

<ul>
  <li>
    <p><strong>OWASP Dependency Check</strong>   <a name="list2_1"></a></p>

    <p>Jenkins íŒŒì´í”„ë¼ì¸ì—ì„œ OWASP Dependency Checkë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ Jenkins ì¸ìŠ¤í„´ìŠ¤ì— OWASP Dependency Checkë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ë§Œë“¤ì–´ì¤€ë‹¤.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span>wget https://dl.bintray.com/jeremy-long/owasp/dependency-check-5.2.4-release.zip
  <span class="nv">$ </span>unzip dependency-check-5.2.4-release.zip
  <span class="nv">$ </span><span class="nb">mv </span>dependency-check/ /var/lib/jenkins
</code></pre></div>    </div>

    <p>dependency-checkë¥¼ ë‹¤ìš´ ë°›ì•„ unzipí•˜ì—¬ Jenkinsì˜ í™ˆë””ë ‰í† ë¦¬ë¡œ ì‚¬ìš©ë˜ëŠ” <code class="highlighter-rouge">/var/lib/jenkins</code> ë””ë ‰í† ë¦¬ë¡œ ì˜®ê²¨ì¤€ë‹¤.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span>/var/lib/jenkins/dependency-check/bin/dependency-check.sh <span class="nt">--scan</span> <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span> <span class="nt">--format</span> HTML <span class="nt">--out</span> /var/lib/jenkins/reports/dependency-check-report <span class="nt">--prettyPrint</span>
</code></pre></div>    </div>

    <p>ìŠ¤ìº”í•  ì†ŒìŠ¤ ì½”ë“œê°€ ë“¤ì–´ìˆëŠ” í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ì‹¤í–‰ dependency-checkë¥¼ ì‹¤í–‰í•œë‹¤.</p>

    <p>â€“scan ì˜µì…˜ì— <code class="highlighter-rouge">pwd</code> ëª…ë ¹ì„ í†µí•´ ì–»ì€ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ê°€ ë“¤ì–´ê°€ì•¼í•˜ë©°, â€“out ì˜µì…˜ì˜ ê°’ì— í•´ë‹¹í•˜ëŠ” ë””ë ‰í† ë¦¬ì¸ <code class="highlighter-rouge">/var/lib/jenkins/reports/dependency-check-report</code>ì•  ìŠ¤ìº”í•˜ì—¬ ì¶œë ¥ë˜ëŠ” ë³´ê³ ì„œ íŒŒì¼ì´ ì €ì¥ëœë‹¤.</p>

    <p>â€“format ì˜µì…˜ì— ë“¤ì–´ê°€ëŠ” ê°’ì€ HTML, XML, JSONì´ ì¡´ì¬í•˜ëŠ”ë°, ì—¬ê¸°ì„œëŠ” dependecy-chcek ê²°ê³¼ë¥¼ SonarQubeì—ì„œë„ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ <code class="highlighter-rouge">HTML</code> íŒŒì¼ë¡œ ë³´ê³ ì„œê°€ ìƒì„±ë˜ë„ë¡ í–ˆë‹¤.</p>

    <blockquote>
      <p>ì°¸ê³ : ìŠ¤ìº” ì¤‘ì— odc.mv.db ê´€ë ¨ ì—ëŸ¬ê°€ ë°œìƒí•œ ì ì´ ìˆëŠ”ë°, $ /var/lib/jenkins/dependency-check/bin/dependency-check.sh â€“purge ëª…ë ¹ì„ í†µí•´ í•´ê²°ë¨</p>
    </blockquote>

    <p><br /></p>
  </li>
  <li>
    <p><strong>SpotBugs</strong>   <a name="list2_2"></a></p>

    <p>Mavenì—ì„œëŠ” <code class="highlighter-rouge">pom.xml</code> ì´ë¼ëŠ” ë¹Œë“œ íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ë¹Œë“œ ì •ë³´ë¥¼ ê¸°ìˆ í•œë‹¤.</p>

    <p>pom.xml íŒŒì¼ì— SpotBugsë¥¼ ì‚¬ìš©í•˜ë„ë¡ ëª…ì‹œí•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•  ë•Œ SpotBugsë¥¼ í†µí•´ ì •ì  ë¶„ì„ì„ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt;plugin&gt;
      &lt;groupId&gt;com.github.spotbugs&lt;/groupId&gt;
      &lt;artifactId&gt;spotbugs-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;3.1.12.2&lt;/version&gt;
      &lt;configuration&gt;
          &lt;effort&gt;Max&lt;/effort&gt;
          &lt;threshold&gt;Low&lt;/threshold&gt;
          &lt;failOnError&gt;true&lt;/failOnError&gt;
          &lt;plugins&gt;
              &lt;plugin&gt;
                  &lt;groupId&gt;com.h3xstream.findsecbugs&lt;/groupId&gt;
                  &lt;artifactId&gt;findsecbugs-plugin&lt;/artifactId&gt;
                  &lt;version&gt;1.10.1&lt;/version&gt;
              &lt;/plugin&gt;
          &lt;/plugins&gt;
      &lt;/configuration&gt;
      &lt;executions&gt;
          &lt;execution&gt;
              &lt;<span class="nb">id</span><span class="o">&gt;</span>scan&lt;/id&gt;
              &lt;phase&gt;verify&lt;/phase&gt;
              &lt;goals&gt;
                  &lt;goal&gt;check&lt;/goal&gt;
              &lt;/goals&gt;
          &lt;/execution&gt;
      &lt;/executions&gt;
  &lt;/plugin&gt;
</code></pre></div>    </div>

    <p><br /></p>
  </li>
  <li>
    <p><strong>CheckStyle</strong>   <a name="list2_3"></a></p>

    <p>SpotBugsì™€ ë§ˆì°¬ê°€ì§€ë¡œ pom.xml íŒŒì¼ì— CheckStyleì„ ì‚¬ìš©í•˜ë„ë¡ ëª…ì‹œí•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•  ë•Œ CheckStyleì„ í†µí•´ ì •ì  ë¶„ì„ì„ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.17&lt;/version&gt;
      &lt;executions&gt;
          &lt;execution&gt;
              &lt;<span class="nb">id</span><span class="o">&gt;</span>validate&lt;/id&gt;
              &lt;phase&gt;validate&lt;/phase&gt;
              &lt;configuration&gt;
                  &lt;configLocation&gt;google_checks.xml&lt;/configLocation&gt;
                  &lt;suppressionsLocation&gt;suppressions.xml
                  &lt;/suppressionsLocation&gt;
                  &lt;encoding&gt;UTF-8&lt;/encoding&gt;
                  &lt;failsOnError&gt;true&lt;/failsOnError&gt;
                  &lt;consoleOutput&gt;true&lt;/consoleOutput&gt;
                  &lt;includeTestSourceDirectory&gt;true
                  &lt;/includeTestSourceDirectory&gt;
              &lt;/configuration&gt;
              &lt;goals&gt;
                  &lt;goal&gt;check&lt;/goal&gt;
              &lt;/goals&gt;
          &lt;/execution&gt;
      &lt;/executions&gt;
  &lt;/plugin&gt;
</code></pre></div>    </div>
    <p><br /></p>
  </li>
  <li>
    <p><strong>PMD(Programing Mistake Detector)</strong>   <a name="list2_4"></a></p>

    <p>pom.xml íŒŒì¼ì— PMDë¥¼ ì‚¬ìš©í•˜ë„ë¡ ëª…ì‹œí•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•  ë•Œ PMDë¥¼ í†µí•´ ì •ì  ë¶„ì„ì„ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-pmd-plugin&lt;/artifactId&gt;
      &lt;version&gt;3.13.0&lt;/version&gt;
      &lt;executions&gt;
          &lt;execution&gt;
              &lt;<span class="nb">id</span><span class="o">&gt;</span>pmd-scan&lt;/id&gt;
              &lt;phase&gt;verify&lt;/phase&gt;
              &lt;goals&gt;
                  &lt;goal&gt;check&lt;/goal&gt;
              &lt;/goals&gt;
          &lt;/execution&gt;
      &lt;/executions&gt;
  &lt;/plugin&gt;
</code></pre></div>    </div>

    <p><br /></p>
  </li>
  <li>
    <p><strong>SonarQube</strong>   <a name="list2_5"></a></p>

    <p>SonarQubeë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆì§€ë§Œ ë³¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” Dockerë¥¼ í†µí•´ì„œ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•  ê²ƒì´ë‹¤.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span>docker run <span class="nt">--restart</span><span class="o">=</span>always <span class="nt">-d</span> <span class="nt">-p</span> 9000:9000 <span class="nt">-p</span> 9092:9092 <span class="nt">--name</span> sonarqube sonarqube
</code></pre></div>    </div>

    <p>Jenkins ì¸ìŠ¤í„´ìŠ¤ì—ì„œ Docker ëª…ë ¹ì„ í†µí•´ sonarqube ê³µì‹ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì—¬ 9000ë²ˆ í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•œë‹¤.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span>vim /usr/local/maven/conf/settings.xml
  &lt;settings&gt;
      &lt;pluginGroups&gt;
          &lt;pluginGroup&gt;org.sonarsource.scanner.maven&lt;/pluginGroup&gt;
      &lt;/pluginGroups&gt;
      &lt;profiles&gt;
          &lt;profile&gt;
              &lt;<span class="nb">id</span><span class="o">&gt;</span>sonar&lt;/id&gt;
              &lt;activation&gt;
                  &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
              &lt;/activation&gt;
              &lt;properties&gt;
                  &lt;<span class="o">!</span><span class="nt">--</span> Optional URL to server. Default value is http://localhost:9000 <span class="nt">--</span><span class="o">&gt;</span>
                  &lt;sonar.host.url&gt;
                  http://JENKINS_SERVER_IP:9000
                  &lt;/sonar.host.url&gt;
              &lt;/properties&gt;
          &lt;/profile&gt;
      &lt;/profiles&gt;
  &lt;/settings&gt;

  <span class="nv">$ </span>mvn clean verify sonar:sonar
</code></pre></div>    </div>

    <p>ê·¸ë¦¬ê³  ìœ„ì™€ ê°™ì´ maven ì„¤ì • íŒŒì¼ì—ì„œ SonarQube í”ŒëŸ¬ê·¸ì¸ì— ëŒ€í•´ ì„¤ì •í•˜ê³  <code class="highlighter-rouge">mvn clean verify</code> ëª…ë ¹ì„ í†µí•´ ë¹Œë“œí•  ë•Œ SonarQubeê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ë³¸ë‹¤.</p>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/project/devsecops_6_3.png" alt="create_sonarqube" width="658" height="388" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 3] SonarQube í”„ë¡œì íŠ¸ ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/project/devsecops_6_4.png" alt="create_sonarqube_token" width="516" height="353" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 4] SonarQube í”„ë¡œì íŠ¸ì˜ í† í° ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/project/devsecops_6_5.png" alt="sonarqube_project_configuration" width="870" height="432" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 5] SonarQube í”„ë¡œì íŠ¸ ì„¤ì • ë° ì‹¤í–‰ ë°©ë²•</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/project/devsecops_6_6.png" alt="jenkins_sonarqube_credentials" width="497" height="286" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 6] Jenkinsì—ì„œ SonarQube credentials ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/project/devsecops_6_7.png" alt="create_sonarqube_webhook" width="408" height="462" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 7] SonarQube ì›¹í›… ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/project/devsecops_6_8.png" alt="jenkins_sonarqube_server_configuration" width="914" height="353" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 8] Jenkinsì—ì„œ SonarQube ì„œë²„ ì„¤ì •</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/project/devsecops_6_9.png" alt="jenkins_sonarqube_scanner_configuration" width="909" height="425" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 9] Jenkinsì—ì„œ SonarQube ìŠ¤ìºë„ˆ ì„¤ì •</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/project/devsecops_6_10.png" alt="sonarqube_dependency_check_configuration" width="918" height="667" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 10] SonarQubeì—ì„œ Dependency-Check ì„¤ì •</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/project/devsecops_6_11.png" alt="sonarqube_external_analyzers_configuration" width="930" height="714" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 11] SonarQubeì—ì„œ External Analyzers ì„¤ì •</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/project/devsecops_6_12.png" alt="sonarqube_quality_profile" width="886" height="638" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 12] SonarQube í’ˆì§ˆ í”„ë¡œíŒŒì¼ êµ¬ì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>
  </li>
  <li>
    <p><strong>Anchore</strong>   <a name="list2_6"></a></p>

    <p>ì—”ì§„ì´ ì²˜ìŒ ì‹œì‘ë˜ë©´ CVE ì·¨ì•½ì„± ë°ì´í„°ë¥¼ í¬í•¨í•˜ì—¬ í”¼ë“œ ë°ì´í„°ì˜ ì „ì²´ ë™ê¸°í™”ë¥¼ ìˆ˜í–‰í•œë‹¤.Â </p>

    <p>ì´ ì²« ë²ˆì§¸ ë™ê¸°í™”ëŠ” ëª‡ ì‹œê°„ ë™ì•ˆ ì§€ì†ë  ìˆ˜ ìˆìœ¼ë©° ì´ ì‹œê°„ ë™ì•ˆ Anchore Engineì€ ì´ë¯¸ì§€ë¥¼ ë¶„ì„ í•  ìˆ˜ ìˆì§€ë§Œ í”¼ë“œ ë™ê¸°í™”ê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ë  ë•Œê¹Œì§€ ì •ì±… í‰ê°€ ë˜ëŠ” CVE ë³´ê³ ë¥¼ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤.</p>

    <p>Anchore Engineì€ REST APIë¥¼ ë…¸ì¶œí•˜ì§€ë§Œ Anchore Engineê³¼ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì€ Python PiPë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¤ì¹˜í•  ìˆ˜ìˆëŠ” Anchore CLIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ ì´ë‹¤.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  crisis51526@cloudshell:~ <span class="o">(</span>cccr-nov2<span class="o">)</span><span class="nv">$ </span>kubectl create namespace anchore
  namespace/anchore created

  crisis51526@cloudshell:~ <span class="o">(</span>cccr-nov2<span class="o">)</span><span class="nv">$ </span>helm repo add anchore https://charts.anchore.io
  <span class="s2">"anchore"</span> has been added to your repositories
  crisis51526@cloudshell:~ <span class="o">(</span>cccr-nov2<span class="o">)</span><span class="nv">$ </span>helm <span class="nb">install </span>anchore anchore/anchore-engine <span class="nt">-n</span> anchore
  NAME: anchore
  LAST DEPLOYED: Sat Oct 20 18:06:18 2020
  NAMESPACE: anchore
  STATUS: deployed
  REVISION: 1
  TEST SUITE: None
  NOTES:
  To use Anchore Engine you need the URL, username, and password to access the API.

  Anchore Engine can be accessed via port 8228 on the following DNS name from within the cluster:
  anchore-anchore-engine-api.anchore.svc.cluster.local

  Here are the steps to configure the anchore-cli <span class="o">(</span><span class="sb">`</span>pip <span class="nb">install </span>anchorecli<span class="sb">`</span><span class="o">)</span><span class="nb">.</span> Use these same values <span class="k">for </span>direct API access as well.

  To configure your anchore-cli run:

      <span class="nv">ANCHORE_CLI_USER</span><span class="o">=</span>admin
      <span class="nv">ANCHORE_CLI_PASS</span><span class="o">=</span><span class="si">$(</span>kubectl get secret <span class="nt">--namespace</span> anchore anchore-anchore-engine <span class="nt">-o</span> <span class="nv">jsonpath</span><span class="o">=</span><span class="s2">"{.data.ANCHORE_ADMIN_PASSWORD}"</span> | <span class="nb">base64</span> <span class="nt">--decode</span><span class="p">;</span> <span class="nb">echo</span><span class="si">)</span>

  Using the service endpoint from within the cluster you can use:
      <span class="nv">ANCHORE_CLI_URL</span><span class="o">=</span>http://anchore-anchore-engine-api.anchore.svc.cluster.local:8228/v1/


  To verify the service is up and running, you can run container <span class="k">for </span>the Anchore Engine CLI:

      kubectl run <span class="nt">-i</span> <span class="nt">--tty</span> anchore-cli <span class="nt">--restart</span><span class="o">=</span>Always <span class="nt">--image</span> anchore/engine-cli  <span class="nt">--env</span> <span class="nv">ANCHORE_CLI_USER</span><span class="o">=</span>admin <span class="nt">--env</span> <span class="nv">ANCHORE_CLI_PASS</span><span class="o">=</span><span class="k">${</span><span class="nv">ANCHORE_CLI_PASS</span><span class="k">}</span> <span class="nt">--env</span> <span class="nv">ANCHORE_CLI_URL</span><span class="o">=</span>http://anchore-anchore-engine-api.anchore.svc.cluster.local:8228/v1/

  from within the container you can use <span class="s1">'anchore-cli'</span> commands.

  <span class="k">*</span> NOTE: On first startup of anchore-engine, it performs a CVE data <span class="nb">sync </span>which may take several minutes to complete. During this <span class="nb">time </span>the system status will report <span class="s1">'partially_down'</span> and any images added <span class="k">for </span>analysis will stay <span class="k">in </span>the <span class="s1">'not_analyzed'</span> state.
  Once the <span class="nb">sync </span>is <span class="nb">complete</span>, any queued images will be analyzed and the system status will change to <span class="s1">'all_up'</span><span class="nb">.</span>

  Initial setup <span class="nb">time </span>can be <span class="o">&gt;</span>120sec <span class="k">for </span>postgresql setup and readiness checks to pass <span class="k">for </span>the services as indicated by pod state. You can check with:
      kubectl get pods <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>anchore-anchore-engine,component<span class="o">=</span>api

  A quick primer on using the Anchore Engine CLI follows. For more info see: https://github.com/anchore/anchore-engine/wiki/Getting-Started

  View system status:

      anchore-cli system status

  Add an image to be analyzed:

      anchore-cli image add &lt;imageref&gt;

  List images and see the analysis status <span class="o">(</span>not_analyzed initially<span class="o">)</span>:

      anchore-cli image list

  Once the image is analyzed you<span class="s1">'ll see status change to '</span>analyzed<span class="s1">'. This may take some time on first execution with a new database because
  the system must first do a CVE data sync which can take several minutes. Once complete, the image will transition to '</span>analyzing<span class="s1">' state.

  When the image reaches '</span>analyzed<span class="s1">' state, you can view policy evaluation output with:

      anchore-cli evaluate check &lt;imageref&gt;

  List CVEs found in the image with:

      anchore-cli image vuln &lt;imageref&gt; os

  List OS packages found in the image with:
      anchore-cli image content &lt;imageref&gt; os

  List files found in the image with:
      anchore-cli image content &lt;imageref&gt; files
</span></code></pre></div>    </div>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span>yum <span class="nb">install</span> <span class="nt">-y</span> epel-release
  <span class="nv">$ </span>yum <span class="nb">install</span> <span class="nt">-y</span> python-pip
  <span class="nv">$ </span>pip <span class="nb">install </span>anchorecli
  <span class="nv">$ </span><span class="nb">export </span><span class="nv">ANCHORE_CLI_USER</span><span class="o">=</span>admin
  <span class="nv">$ </span><span class="nb">export </span><span class="nv">ANCHORE_CLI_PASS</span><span class="o">=</span>foobar
  <span class="nv">$ </span><span class="nb">export </span><span class="nv">ANCHORE_CLI_URL</span><span class="o">=</span>http://ANCHORE_IP:30228/v1

  crisis51526@cloudshell:~/anchore-engine <span class="o">(</span>cccr-nov2<span class="o">)</span><span class="nv">$ </span><span class="nb">export </span><span class="nv">ANCHORE_CLI_PASS</span><span class="o">=</span><span class="si">$(</span>kubectl get secret <span class="nt">--namespace</span> anchore anchore-anchore-engine <span class="nt">-o</span> <span class="nv">jsonpath</span><span class="o">=</span><span class="s2">"{.data.ANCHORE_ADMIN_PASSWORD}"</span> | <span class="nb">base64</span> <span class="nt">--decode</span><span class="p">;</span> <span class="nb">echo</span><span class="si">)</span>
  crisis51526@cloudshell:~/anchore-engine <span class="o">(</span>cccr-nov2<span class="o">)</span><span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$ANCHORE_CLI_PASS</span>
  foobar
</code></pre></div>    </div>

    <p>ì»¨í…Œì´ë„ˆì— ì „ë‹¬ ëœ ë¹„ë°€ì— ì•¡ì„¸ìŠ¤í•˜ì—¬ kubernetesì—ì„œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê²€ìƒ‰ í•  ìˆ˜ ìˆë‹¤.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  crisis51526@cloudshell:~/anchore-engine <span class="o">(</span>cccr-nov2<span class="o">)</span><span class="nv">$ </span>vim anchore-nodeport.yaml
  apiVersion: v1
  kind: Service
  metadata:
  name: anchore-api
  spec:
  <span class="nb">type</span>: NodePort
  selector:
      app: anchore-anchore-engine
      component: api
  ports:
      - protocol: TCP
      port: 8228
      targetPort: 8228
      nodePort: 30228

  crisis51526@cloudshell:~/anchore-engine <span class="o">(</span>cccr-nov2<span class="o">)</span><span class="nv">$ </span>kubectl create <span class="nt">-f</span> anchore-nodeport.yaml <span class="nt">-n</span> anchore
  service/anchore-api created

  <span class="o">[</span>root@jenkins cccr-dvwa]# anchore-cli image add jisunpark/cccr-dvwa-java-web <span class="nt">--dockerfile</span><span class="o">=</span>Dockerfile <span class="nt">--force</span>
  Image Digest: sha256:fec038ff428898223fc9fb516caedbf52c4572f2e491590d8f5647e8e5d787c9
  Parent Digest: sha256:fec038ff428898223fc9fb516caedbf52c4572f2e491590d8f5647e8e5d787c9
  Analysis Status: not_analyzed
  Image Type: docker
  Analyzed At: 2020-10-20T18:43:29Z
  Image ID: 85a4a0ea97867479bcb328c7a6c75691434d36ea0a0b75e6e453b22ff0f6fc7d
  Dockerfile Mode: Actual
  Distro: debian
  Distro Version: 10
  Size: 920176640
  Architecture: amd64
  Layer Count: 16

  Full Tag: docker.io/jisunpark/cccr-dvwa-java-web:latest
  Tag Detected At: 2020-10-20T18:40:33Z
</code></pre></div>    </div>

    <p><br /></p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  properties<span class="o">([</span>
      parameters<span class="o">([</span>
          string<span class="o">(</span>name: <span class="s1">'sonar.projectKey'</span>, defaultValue: <span class="s1">'cccr-dvwa'</span><span class="o">)</span>,
          string<span class="o">(</span>name: <span class="s1">'sonar.host.url'</span>, defaultValue: <span class="s1">'http://JENKINS_SERVER_IP:9000'</span><span class="o">)</span>,
          string<span class="o">(</span>name: <span class="s1">'sonar.login'</span>, defaultValue: <span class="s1">'265c24760ec4f5cf1f28b87981c7bbe55c3bdffc'</span><span class="o">)</span>,
      <span class="o">])</span> 
  <span class="o">])</span>
  pipeline <span class="o">{</span>
      environment <span class="o">{</span>
          SLACK_CHANNEL <span class="o">=</span> <span class="s1">'#send-slack-message-from-jenkins'</span>
          REGISTRY <span class="o">=</span> <span class="s1">'crisis513/cccr-dvwa-java-web'</span> 
          REGISTRYCREDENTIAL <span class="o">=</span> <span class="s1">'dockerhub'</span> 
          DOCKER_IMAGE <span class="o">=</span> <span class="s1">''</span>
      <span class="o">}</span>
      agent any
      tools <span class="o">{</span> 
          maven <span class="s1">'mvn'</span> 
      <span class="o">}</span>
      stages <span class="o">{</span>
          stage<span class="o">(</span><span class="s1">'Git clone'</span><span class="o">)</span> <span class="o">{</span>
              steps <span class="o">{</span>
                  git <span class="s1">'https://github.com/JisunParkRea/cccr-dvwa.git'</span>
              <span class="o">}</span>
          <span class="o">}</span>
          stage<span class="o">(</span><span class="s1">'Docker image build and push to Dockerhub'</span><span class="o">)</span> <span class="o">{</span> 
              steps<span class="o">{</span>
                  script <span class="o">{</span>
                      DOCKER_IMAGE <span class="o">=</span> docker.build registry
                      docker.withRegistry<span class="o">(</span><span class="s1">''</span>, REGISTRYCREDENTIAL<span class="o">)</span> <span class="o">{</span>
                          DOCKER_IMAGE.push<span class="o">(</span><span class="s2">"latest"</span><span class="o">)</span>
                      <span class="o">}</span>
                  <span class="o">}</span>
              <span class="o">}</span>
          <span class="o">}</span> 
          stage<span class="o">(</span><span class="s1">'Anchore Analysis'</span><span class="o">)</span> <span class="o">{</span>
              steps <span class="o">{</span>
                  sh <span class="s1">'echo "$REGISTRY:latest `pwd`/Dockerfile" &gt; anchore_images'</span>
                  anchore name: <span class="s1">'anchore_images'</span>
              <span class="o">}</span>
          <span class="o">}</span>
          stage<span class="o">(</span><span class="s1">'Clean local docker image'</span><span class="o">)</span> <span class="o">{</span>
              agent any
                  steps <span class="o">{</span> 
                  sh <span class="s1">'docker rmi $REGISTRY:latest'</span>
              <span class="o">}</span> 
          <span class="o">}</span>
          stage <span class="o">(</span><span class="s1">'Static Analysis(PMD, SpotBugs, CheckStyle)'</span><span class="o">)</span> <span class="o">{</span>
              steps <span class="o">{</span>
                  sh <span class="s1">'mvn pmd:pmd spotbugs:spotbugs checkstyle:checkstyle'</span>
              <span class="o">}</span>
          <span class="o">}</span>
          stage <span class="o">(</span><span class="s1">'Dependency-Check Analysis'</span><span class="o">)</span> <span class="o">{</span>
              steps <span class="o">{</span>
                  sh <span class="s1">'/var/lib/jenkins/dependency-check/bin/dependency-check.sh --scan `pwd` --format HTML --out /var/lib/jenkins/reports/dependency-check-report --prettyPrint'</span>
              <span class="o">}</span>
          <span class="o">}</span>
          stage<span class="o">(</span><span class="s1">'Sonarqube and Quality gate'</span><span class="o">)</span> <span class="o">{</span>
              options <span class="o">{</span>
                  <span class="nb">timeout</span><span class="o">(</span><span class="nb">time</span>: 5, unit: <span class="s1">'MINUTES'</span><span class="o">)</span>
                  retry<span class="o">(</span>2<span class="o">)</span>
              <span class="o">}</span>
              steps <span class="o">{</span>
                  withSonarQubeEnv<span class="o">(</span><span class="s1">'SonarQube Server'</span><span class="o">)</span> <span class="o">{</span>
                      sh <span class="s2">"mvn sonar:sonar"</span>
                  <span class="o">}</span>
                  script <span class="o">{</span>
                      qualitygate <span class="o">=</span> waitForQualityGate<span class="o">()</span>
                      <span class="k">if</span> <span class="o">(</span>qualitygate.status <span class="o">!=</span> <span class="s2">"OK"</span><span class="o">)</span> <span class="o">{</span>
                          currentBuild.result <span class="o">=</span> <span class="s2">"FAILURE"</span>
                          slackSend <span class="o">(</span>channel: <span class="nv">$SLACK_CHANNEL</span>, color: <span class="s1">'#F01717'</span>, message: <span class="s2">"*</span><span class="nv">$JOB_NAME</span><span class="s2">*, &lt;</span><span class="nv">$BUILD_URL</span><span class="s2">|Build #</span><span class="nv">$BUILD_NUMBER</span><span class="s2">&gt;"</span><span class="o">)</span>
                      <span class="o">}</span>
                  <span class="o">}</span>
              <span class="o">}</span>
          <span class="o">}</span>
      <span class="o">}</span>
      post <span class="o">{</span> 
          success <span class="o">{</span> 
              slackSend <span class="o">(</span>channel: <span class="nv">$SLACK_CHANNEL</span>, color: <span class="s1">'#00FF00'</span>, message: <span class="s2">"SUCCESSFUL: Job '</span><span class="k">${</span><span class="nv">env</span><span class="p">.JOB_NAME</span><span class="k">}</span><span class="s2"> [</span><span class="k">${</span><span class="nv">env</span><span class="p">.BUILD_NUMBER</span><span class="k">}</span><span class="s2">]' (</span><span class="k">${</span><span class="nv">env</span><span class="p">.BUILD_URL</span><span class="k">}</span><span class="s2">)"</span><span class="o">)</span> 
          <span class="o">}</span>
          failure <span class="o">{</span>
              slackSend <span class="o">(</span>channel: <span class="nv">$SLACK_CHANNEL</span>, color: <span class="s1">'#F01717'</span>, message: <span class="s2">"FAILURE: '</span><span class="k">${</span><span class="nv">env</span><span class="p">.JOB_NAME</span><span class="k">}</span><span class="s2"> [</span><span class="k">${</span><span class="nv">env</span><span class="p">.BUILD_NUMBER</span><span class="k">}</span><span class="s2">]' (</span><span class="k">${</span><span class="nv">env</span><span class="p">.BUILD_URL</span><span class="k">}</span><span class="s2">)"</span><span class="o">)</span>
          <span class="o">}</span>
      <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div>    </div>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/project/devsecops_6_13.png" alt="anchore_test" width="819" height="342" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 13] Anchore íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ì—¬ê¸°ê¹Œì§€ DevOps íŒŒì´í”„ë¼ì¸ì—ì„œ ë°°í¬í•  ë•Œ ì •ì  í…ŒìŠ¤íŠ¸ë¥¼ ê±°ì³ ë°°í¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ë‹¤.</p>

    <p>Acceptance, Production ë‹¨ê³„ì¸ CD íŒŒì´í”„ë¼ì¸ì— OWASP ZAP, Hashicorp Vault, Chaos monkey ë“± ë™ì  í…ŒìŠ¤íŠ¸ ìë™í™”ë„ ì ìš©ì‹œì¼œë³´ê³  ì‹¶ì—ˆì§€ë§Œ ê°‘ì‘ìŠ¤ëŸ½ê²Œ êµ°ëŒ€ë¥¼ ê°€ê²Œë˜ì–´ í”„ë¡œì íŠ¸ëŠ” ì—¬ê¸°ê¹Œì§€ ì§„í–‰ë˜ì—ˆë‹¤.ğŸ˜­ğŸ˜­</p>
  </li>
</ul>

:ET