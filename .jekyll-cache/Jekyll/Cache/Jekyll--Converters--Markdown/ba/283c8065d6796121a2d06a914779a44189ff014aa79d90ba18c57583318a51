I"Oä<p>ë³¸ í”„ë¡œì íŠ¸ëŠ” CCCRì—ì„œ GCP(Google Cloud Platform)ë¥¼ ê³µë¶€í•˜ë©° ì§§ì€ ê¸°ê°„ ì§„í–‰ëœ í† ì´ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.</p>

<hr />

<h2 id="ëª©ì°¨">ëª©ì°¨</h2>

<p><a href="#list1">1. í”„ë¡œì íŠ¸ ê°œìš”</a></p>

<p><a href="#list2">2. í”„ë¡œì íŠ¸ êµ¬í˜„</a></p>

<p><a href="#list2_1">Â Â  2.1. Cloud SQL êµ¬ì„±</a></p>

<p><a href="#list2_2">Â Â  2.2. VM ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë° ì›Œë“œí”„ë ˆìŠ¤ êµ¬ì¶•</a></p>

<p><a href="#list2_3">Â Â  2.3. VM ì¸ìŠ¤í„´ìŠ¤ì™€ Cloud SQL ì—°ë™</a></p>

<p><a href="#list2_4">Â Â  2.4. ê´€ë¦¬í˜• ë¡œë“œ ë°¸ëŸ°ì‹± êµ¬ì„±</a></p>

<p><a href="#list2_5">Â Â  2.5. Bucket ìƒì„± ë° ë°±ì—… ì„¤ì •</a></p>

<p><a href="#list2_6">Â Â  2.6. Stack Driverë¥¼ í™œìš©í•œ ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹… ì‹œìŠ¤í…œ êµ¬ì¶•</a></p>

<p><a href="#list3">3. í”„ë¡œì íŠ¸ í…ŒìŠ¤íŠ¸</a></p>

<p><a href="#list3_1">Â Â  3.1. Cloud SQL ë¡œê¹… í…ŒìŠ¤íŠ¸</a></p>

<p><a href="#list3_2">Â Â  3.2. ì˜¤í† ìŠ¤ì¼€ì¼ë§ ë° ë¶€í•˜í…ŒìŠ¤íŠ¸</a></p>

<hr />

<h2 id="1-í”„ë¡œì íŠ¸-ê°œìš”---"><span style="color:purple"><strong>1. í”„ë¡œì íŠ¸ ê°œìš”</strong></span>   <a name="list1"></a></h2>

<p><br /></p>

<p>ë¨¼ì €, í”„ë¡œì íŠ¸ ì§„í–‰ ë‹¹ì‹œì— notionì„ í†µí•´ ì •ë¦¬í–ˆì—ˆë˜ í”„ë¡œì íŠ¸ ì§„í–‰ ìˆœì„œëŠ” ë‹¤ìŒ [ê·¸ë¦¼ 1]ê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_1.png" alt="What_we_did" width="560" height="310" /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">[ê·¸ë¦¼ 1] í”„ë¡œì íŠ¸ ì§„í–‰ ìˆœì„œ</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<p>ì›¹ì„œë¹„ìŠ¤ëŠ” CentOS ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ì›Œë“œí”„ë ˆìŠ¤(Wordpress)ë¥¼ êµ¬ì¶•í•˜ì˜€ê³ , êµ¬ì¶•í•œ ì›¹ì„œë¹„ìŠ¤ì— GCPì˜ ê¸°ëŠ¥ì„ ìµœëŒ€í•œ í™œìš©í•˜ëŠ” í˜•íƒœë¡œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.</p>

<p>GCPì—ì„œ ì œê³µí•´ì£¼ëŠ” Cloud DNSë¥¼ ì´ìš©í•˜ì—¬ ë„ë©”ì¸ì„ ì„¤ì •í•´ë³´ê³  ì‹¶ì—ˆì§€ë§Œ, ë„ë©”ì¸ì„ êµ¬ì…í•˜ê³  ë“±ë¡í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ì—¬ ìƒëµí–ˆìŠµë‹ˆë‹¤.</p>

<p>ë‹¤ìŒ [ê·¸ë¦¼ 2]ëŠ” ë³¸ í”„ë¡œì íŠ¸ì˜ êµ¬ì¡°ë¥¼ ì‰½ê²Œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë„ë¡ ì•„í‚¤í…ì²˜ë¥¼ ê·¸ë¦° ê²ƒì…ë‹ˆë‹¤.</p>

<p><br /></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_2.png" alt="project_architecture" width="850" height="470" /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">[ê·¸ë¦¼ 2] í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<hr />

<h2 id="2-í”„ë¡œì íŠ¸-êµ¬í˜„---"><span style="color:purple"><strong>2. í”„ë¡œì íŠ¸ êµ¬í˜„</strong></span>   <a name="list2"></a></h2>

<p><br /></p>

<ul>
  <li>
    <p><strong>Cloud SQL êµ¬ì„±</strong>   <a name="list2_1"></a></p>

    <p>GCP ì½˜ì†” í˜ì´ì§€ì— ì ‘ì†í•˜ë©´ ìƒë‹¨ ë°”ì— ì œí’ˆ ë° ë¦¬ì†ŒìŠ¤ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” í…ìŠ¤íŠ¸ ë°•ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤.</p>

    <p>í•´ë‹¹ ê²€ìƒ‰ì°½ì—ì„œ <code class="language-plaintext highlighter-rouge">Cloud SQL Admin API</code>ë¥¼ ì…ë ¥í•˜ì—¬ ë‹¤ìŒ [ê·¸ë¦¼ 3]ì— ë³´ì´ëŠ” <strong>ì‚¬ìš©</strong> ë²„íŠ¼ì„ ëˆŒëŸ¬ Cloud SQLë¥¼ í™œì„±í™” ì‹œì¼œì¤ë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_3.png" alt="enable_cloudsql" width="320" height="132" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 3] Cloud SQL Admin API í™œì„±í™”</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>Cloud SQL Admin APIë¥¼ í™œì„±í™” í–ˆë‹¤ë©´ GCP ì½˜ì†” í˜ì´ì§€ì˜ ì™¼ìª½ ìƒë‹¨ì— ìˆëŠ” íƒìƒ‰ ë©”ë‰´ì—ì„œ <strong>[SQL] íƒ­</strong>ì„ ëˆŒëŸ¬ ë‹¤ìŒ [ê·¸ë¦¼ 4]ì™€ ê°™ì´ <strong>Cloud SQL ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±</strong>í–ˆìŠµë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_4.png" alt="create_cloudsql_instance" width="450" height="552" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 4] Cloud SQL ì¸ìŠ¤í„´ìŠ¤ ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ë³¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” MySQL 5.7ì„ ì„ íƒí•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•˜ì˜€ê³ , ë¦¬ì „ì€ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•´ ë¹„êµì  ê°€ê¹Œìš´ ì„œìš¸ ë¦¬ì „ì„ ì„ íƒí•˜ì˜€ìŠµë‹ˆë‹¤.</p>

    <p>ë‹¤ìŒìœ¼ë¡œ GCP ì½˜ì†” ê¸°ëŠ¥ì¸ Cloud Shell í™”ë©´ì—ì„œ ì›¹ì„œë²„ì—ì„œ ì‚¬ìš©í•  ë°ì´í„°ë² ì´ìŠ¤ì˜ ì„¤ì •ì„ ì§„í–‰í•©ë‹ˆë‹¤.</p>

    <pre><code class="language-mysql">  crisis51526@cloudshell:~ (cccr-gcp-project)$ gcloud sql connect mysql-wordpress --user=root --quiet
  Allowlisting your IP for incoming connection for 5 minutes...done.
  Connecting to database with SQL user [root].Enter password: Input Your Password

  Your MySQL connection id is 187
  Server version: 5.7.25-google-log (Google)

  Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.

  Oracle is a registered trademark of Oracle Corporation and/or its
  affiliates. Other names may be trademarks of their respective
  owners.

  Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.

  mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'Input Your Password' WITH GRANT OPTION;
  Query OK, 0 rows affected, 1 warning (0.05 sec)

  mysql&gt; CREATE DATABASE wordpress CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
  Query OK, 1 row affected (0.05 sec)

  mysql&gt; GRANT ALL ON wordpress.* TO 'wordpressuser'@'%' IDENTIFIED BY 'Input Your Password';
  Query OK, 0 rows affected, 1 warning (0.06 sec)

  mysql&gt; FLUSH PRIVILEGES;
  Query OK, 0 rows affected (0.06 sec)
</code></pre>

    <p><br /></p>
  </li>
  <li>
    <p><strong>VM ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë° ì›Œë“œí”„ë ˆìŠ¤ êµ¬ì¶•</strong>   <a name="list2_2"></a></p>

    <p>ì›¹ì„œë²„ì— ì—°ë™í•  Cloud SQLì˜ êµ¬ì„±ì´ ëª¨ë‘ ëë‚œ í›„ì— ì›Œë“œí”„ë ˆìŠ¤ë¥¼ ì„¤ì¹˜í•  VM ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>

    <p>íƒìƒ‰ ë©”ë‰´ì—ì„œ <strong>[Compute Engine] - [VM ì¸ìŠ¤í„´ìŠ¤]</strong> íƒ­ì„ ëˆŒëŸ¬ <strong>ë§Œë“¤ê¸°</strong> ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë‹¤ìŒ [ê·¸ë¦¼ 5]ì™€ ê°™ì´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_5.png" alt="create_instance" width="450" height="1040" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 5] VM ì¸ìŠ¤í„´ìŠ¤ ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ë¨¼ì €, ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ ì•ì„œ ìƒì„±í•œ Cloud SQL ì¸ìŠ¤í„´ìŠ¤ì™€ ê°™ì€ ë¦¬ì „(ì„œìš¸ - <code class="language-plaintext highlighter-rouge">asia-northeast3-a</code>)ì„ ì„ íƒí•˜ë„ë¡ í•©ë‹ˆë‹¤.</p>

    <p>flavorëŠ” ì‹¤ì œ ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•  ëª©ì ì´ ì•„ë‹ˆê¸°ì— VM ì‚¬ì–‘ì´ ë‚®ì€ <code class="language-plaintext highlighter-rouge">n1-standard-1</code>ì„ ì„ íƒí•˜ì˜€ê³ ,</p>

    <p>OSëŠ” <code class="language-plaintext highlighter-rouge">CentOS 7</code>, ì›¹ì„œë²„ì˜ <code class="language-plaintext highlighter-rouge">HTTP íŠ¸ë˜í”½ì„ í—ˆìš©</code>í•´ì£¼ë„ë¡ ì²´í¬í•˜ì˜€ìŠµë‹ˆë‹¤.</p>

    <p><br /></p>

    <p>ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤ì— ì›Œë“œí”„ë ˆìŠ¤ë¥¼ ì„¤ì¹˜í•˜ê¸° ìœ„í•´ í„°ë¯¸ë„ì— ì…ë ¥í•œ ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">[</span>crisis51526@instance-wordpress ~]<span class="nv">$ </span><span class="nb">sudo </span>su -

  <span class="o">[</span>root@instance-wordpress ~]# yum <span class="nt">-y</span> update
  <span class="o">[</span>root@instance-wordpress ~]# yum <span class="nt">-y</span> <span class="nb">install </span>https://rpms.remirepo.net/enterprise/remi-release-7.rpm 
  <span class="o">[</span>root@instance-wordpress ~]# yum <span class="nt">-y</span> <span class="nb">install </span>epel-release yum-utils

  <span class="o">[</span>root@instance-wordpress ~]# setenforce 0

  <span class="o">[</span>root@instance-wordpress ~]# yum-config-manager <span class="nt">--disable</span> remi-php54
  <span class="o">[</span>root@instance-wordpress ~]# yum-config-manager <span class="nt">--enable</span> remi-php74
  <span class="o">[</span>root@instance-wordpress ~]# yum <span class="nt">-y</span> <span class="nb">install </span>php php-fpm
  <span class="o">[</span>root@instance-wordpress ~]# yum <span class="nt">-y</span> <span class="nb">install </span>php-cli php-redis php-brotli php-intl php-gd php-gmp php-imap php-bcmath <span class="se">\</span>
      php-interbase php-json php-mbstring php-mysqlnd php-odbc php-opcache php-memcached php-tidy php-pdo php-pdo-dblib <span class="se">\</span>
      php-pear php-pgsql php-process php-pecl-apcu php-pecl-geoip php-pecl-imagick php-pecl-hrtime php-pecl-json <span class="se">\</span>
      php-pecl-memcache php-pecl-rar php-pecl-pq php-pecl-redis4 php-pecl-yaml php-pecl-zip
  <span class="o">[</span>root@instance-wordpress ~]# systemctl <span class="nb">enable </span>httpd
  <span class="o">[</span>root@instance-wordpress ~]# systemctl restart httpd
  <span class="o">[</span>root@instance-wordpress ~]# systemctl <span class="nb">enable </span>php-fpm <span class="o">&amp;&amp;</span> systemctl start php-fpm
    
  <span class="o">[</span>root@instance-wordpress ~]# yum <span class="nt">-y</span> <span class="nb">install </span>redis memcached
  <span class="o">[</span>root@instance-wordpress ~]# systemctl <span class="nb">enable </span>redis <span class="o">&amp;&amp;</span> systemctl <span class="nb">enable </span>memcached 
  <span class="o">[</span>root@instance-wordpress ~]# systemctl start redis <span class="o">&amp;&amp;</span> systemctl start memcached
  <span class="o">[</span>root@instance-wordpress ~]# vim /etc/sysconfig/memcached
  <span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">"-l 127.0.0.1"</span>

  <span class="o">[</span>root@instance-wordpress ~]# systemctl restart memcached
    
  <span class="o">[</span>root@instance-wordpress ~]# yum <span class="nt">-y</span> <span class="nb">install </span>wget
  <span class="o">[</span>root@instance-wordpress ~]# wget http://wordpress.org/latest.tar.gz
  <span class="o">[</span>root@instance-wordpress ~]# <span class="nb">tar</span> <span class="nt">-xvzf</span> latest.tar.gz <span class="nt">-C</span> /var/www/html
  <span class="o">[</span>root@instance-wordpress ~]# <span class="nb">chown</span> <span class="nt">-R</span> apache: /var/www/html/wordpress
  <span class="o">[</span>root@instance-wordpress ~]# vim /etc/httpd/conf.d/wordpress.conf
  &lt;VirtualHost <span class="k">*</span>:80&gt;
      DocumentRoot /var/www/html/wordpress
      ServerName lls.wordpress.com
      ServerAlias www.lls.wordpress.com
    
      &lt;Directory /var/www/html/wordpress/&gt;
          Options +FollowSymlinks
          AllowOverride All
      &lt;/Directory&gt;
    
      ErrorLog /var/log/httpd/tecminttest-error-log
      CustomLog /var/log/httpd/tecminttest-acces-log common
  &lt;/VirtualHost&gt;
    
  <span class="o">[</span>root@instance-wordpress ~]# systemctl restart httpd.service
  <span class="o">[</span>root@instance-wordpress ~]# <span class="nb">cd</span> /var/www/html/wordpress/
  <span class="o">[</span>root@instance-wordpress wordpress]# <span class="nb">cp </span>wp-config-sample.php wp-config.php 
  <span class="o">[</span>root@instance-wordpress wordpress]# vim wp-config.php
  define<span class="o">(</span> <span class="s1">'DB_NAME'</span>, <span class="s1">'wordpress'</span> <span class="o">)</span><span class="p">;</span>
  define<span class="o">(</span> <span class="s1">'DB_USER'</span>, <span class="s1">'wordpressuser'</span> <span class="o">)</span><span class="p">;</span>
  define<span class="o">(</span> <span class="s1">'DB_PASSWORD'</span>, <span class="s1">'Input Your Password.'</span> <span class="o">)</span><span class="p">;</span>
  define<span class="o">(</span> <span class="s1">'DB_HOST'</span>, <span class="s1">'localhost'</span> <span class="o">)</span><span class="p">;</span>
</code></pre></div>    </div>

    <p><br /></p>
  </li>
  <li>
    <p><strong>VM ì¸ìŠ¤í„´ìŠ¤ì™€ Cloud SQL ì—°ë™</strong>   <a name="list2_3"></a></p>

    <p>ì›Œë“œí”„ë ˆìŠ¤ë¥¼ ì„¤ì¹˜í•œ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ Cloud SQL Proxyë¥¼ í†µí•´ Cloud SQLì— ì—°ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ê¶Œí•œì´ í•„ìš”í•˜ë‹¤.</p>

    <p>íƒìƒ‰ ë©”ë‰´ì—ì„œ <strong>[IAM ë° ê´€ë¦¬ì] - [IAM]</strong> íƒ­ì„ ëˆŒëŸ¬ ë‹¤ìŒ [ê·¸ë¦¼ 6]ì™€ ê°™ì´ ìƒˆë¡œìš´ êµ¬ì„±ì›ì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_6.png" alt="iam_create" width="800" height="627" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 6] ì„œë¹„ìŠ¤ ê³„ì • ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ì—­í• ì—ì„œ <strong>Cloud SQL -&gt; Cloud SQL í¸ì§‘ì</strong>ë¥¼ ì„ íƒí•˜ê³  ì„œë¹„ìŠ¤ í‚¤ë„ ìƒì„±í•´ì¤ë‹ˆë‹¤.</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="p">{</span>
      <span class="s">"type"</span><span class="p">:</span> <span class="s">"service_account"</span><span class="p">,</span>
      <span class="s">"project_id"</span><span class="p">:</span> <span class="s">"cccr-gcp-project"</span><span class="p">,</span>
      <span class="s">"private_key_id"</span><span class="p">:</span> <span class="s">"3ef41c7827f3524bc358d489313f6084c229cf2f"</span><span class="p">,</span>
      <span class="s">"private_key"</span><span class="p">:</span> <span class="s">"-----BEGIN PRIVATE KEY-----</span><span class="se">\\</span><span class="s">nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQCVnSNgrX4B+Vi1</span><span class="se">\\</span><span class="s">nYoTpCMXSl/p/tSjfhGaIUprWzCSfl3mVVQJlnN9mDQ8GTvg4l5UpGxvuaftV3MDN</span><span class="se">\\</span><span class="s">npwBkZ/tCKE7h/DTRx1cay28paXGV/vKZt8OwwWCCmm5Uk5ZvIvmel/oGho9TC886</span><span class="se">\\</span><span class="s">nJ1DvWSqjZL+aRwFxWJqGwpF4zxXOFjStcqhCdnT9UipCfOgqx2xBoN4N0mhkUEby</span><span class="se">\\</span><span class="s">nfqLqo7AqEYh/5/zXWR9PTm7bESbqtz2i+VUOGwDDt5U0PVatGpFahNL8qUj4lJlO</span><span class="se">\\</span><span class="s">nOzltgNICedHdUMa9B+GuSi5NOKHkuR5lOJZGcqziZFQLw3UpUyGMPVdsupcn6ZQm</span><span class="se">\\</span><span class="s">nLwdl/lpfAgMBAAECgf8TSS5GSBb2Ki5FM23unDLj8rNXwwKBzY9qAzvydF5ENEJ3</span><span class="se">\\</span><span class="s">n/X1Rm+cwQH6vUX6tzNxtcBEpqn+7kblIyT5DsyOwY4HHn7svT4Lq8U5jCDScIUEk</span><span class="se">\\</span><span class="s">nj4uqPUMzkrSmMmAx81A6IV0Zej7/dYZA+NB2Cgh1B4erW3vUIJfKx0n5SLiG2CN9</span><span class="se">\\</span><span class="s">nSRC2L3YlwKPrmGiKXSvt6p2qezDjwycooph5s8EWjZ4Wyy5lP2bjaIGqs+QzIN3s</span><span class="se">\\</span><span class="s">nYAMf3KTNF8EHNs4jJYmFiwIuz8q4zscnt3z7TF5vsgcBSgKqnE5rSa2UiyXx/8um</span><span class="se">\\</span><span class="s">nw7gU5taZh32o0Xk8AYTrVW7vYx9PkAz7g77yVFkCgYEAxQSTYZmkPxXKYs9aGeyi</span><span class="se">\\</span><span class="s">nYCRnBNgNr1WjvQ5DQGBAUQS4OiZEb6JoWDqlOvcMqvF1Vu2CPv5MTgEWrs2+mAmj</span><span class="se">\\</span><span class="s">n8xWvySm97oJ2FfnYX2rl/SmGmxbWq2CKzsU56jJNDUGBiC4/3Ot8hsy/cnzEec54</span><span class="se">\\</span><span class="s">nhU1yW+mEwq0Ew50Ab5IldcsCgYEAwmeFo8XoI86Y8MakIoW6rL9zredwf+B9qYjI</span><span class="se">\\</span><span class="s">n7VHGcEnAcCfnRevLj7kK/QFswox/cfGmIbOxd1BPBH4D6nVKmRWqIzkpnCPkVRJ8</span><span class="se">\\</span><span class="s">n5BuImNhzfurPUgJWf0lNkrRaSwbsBYf12ZQ01J5t4Bg8ArQ5nNNT4ieC9dptpYTL</span><span class="se">\\</span><span class="s">n2hFSuz0CgYAMkzEw/pR8LlDfo6p1kyP+DPTCW2PsOAQecgWa20nfofR8Sar+kRgl</span><span class="se">\\</span><span class="s">n4YBgVhpp4sWBieFRUfve0rT27Uzn+V2Mi2rP5SkpSwxsdKj51iHd2cOsrHWBNMVH</span><span class="se">\\</span><span class="s">nU1FSAGnombDB12neGO220OS7UvlbaPFKWNoewbXmkxKFxcScWnCnpwKBgQCIiwub</span><span class="se">\\</span><span class="s">nhzLQi5hybSL1uHXwRZxrhgZHWxcID7IItgop7jNC01QmkUJt1St5nxmT3/jXwEHO</span><span class="se">\\</span><span class="s">npBa+1eJaJmR7thxKP6Q7jzfBmpgShKTB1vDvYgBlIWmykT/NsV/R7ekJj3gRPniY</span><span class="se">\\</span><span class="s">ndPdSa2CDKKJlx847b1cYnmXmZp/ixM4lgUtZhQKBgQC7GBZxRh4dx6JWqQ8J2Vaq</span><span class="se">\\</span><span class="s">n1sE83o0/K0i4i2MqEw70CG4nFs5831fnV6DSVWpyvxlN9M8Ce19ZcpVLP4UD0pE6</span><span class="se">\\</span><span class="s">ndTKGhvdIkQeat9yWBr4J/+d9jz3uleXGZCmVYrR/f2Ge8Vb/DWEUf2Ps9s0QZkoO</span><span class="se">\\</span><span class="s">nN6xZ+UJBHIwBp+i3pLqXOw==</span><span class="se">\\</span><span class="s">n-----END PRIVATE KEY-----</span><span class="se">\\</span><span class="s">n"</span><span class="p">,</span>
      <span class="s">"client_email"</span><span class="p">:</span> <span class="s">"wpmanager@cccr-gcp-project.iam.gserviceaccount.com"</span><span class="p">,</span>
      <span class="s">"client_id"</span><span class="p">:</span> <span class="s">"116608554003641610764"</span><span class="p">,</span>
      <span class="s">"auth_uri"</span><span class="p">:</span> <span class="s">"&lt;https://accounts.google.com/o/oauth2/auth&gt;"</span><span class="p">,</span>
      <span class="s">"token_uri"</span><span class="p">:</span> <span class="s">"&lt;https://oauth2.googleapis.com/token&gt;"</span><span class="p">,</span>
      <span class="s">"auth_provider_x509_cert_url"</span><span class="p">:</span> <span class="s">"&lt;https://www.googleapis.com/oauth2/v1/certs&gt;"</span><span class="p">,</span>
      <span class="s">"client_x509_cert_url"</span><span class="p">:</span> <span class="s">"&lt;https://www.googleapis.com/robot/v1/metadata/x509/wpmanager%40cccr-gcp-project.iam.gserviceaccount.com&gt;"</span>
  <span class="p">}</span>
</code></pre></div>    </div>

    <p>ìƒì„±ëœ ì„œë¹„ìŠ¤ í‚¤ì˜ ìƒ˜í”Œì…ë‹ˆë‹¤. Cloud SQL Proxyë¥¼ í†µí•´ Cloud SQLì— ì ‘ì†í•  ë•Œ í•„ìš”í•©ë‹ˆë‹¤.</p>

    <p><br /></p>

    <p>ê·¸ë¦¬ê³  ë‹¤ìŒ [ê·¸ë¦¼ 7]ê³¼ ê°™ì´ Cloud SQL ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì ‘ê·¼ì„ í—ˆìš©í•  ë„¤íŠ¸ì›Œí¬ë¥¼ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_7.png" alt="cloudsql_configuration" width="650" height="442" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 7] Cloud SQL ì¸ìŠ¤í„´ìŠ¤ ì„¤ì •</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ì—°ê²° ë°©ì‹ì„ <strong>ê³µê°œ IP</strong>ì— ì²´í¬í•˜ì—¬ í”„ë¡ì‹œë¥¼ í†µí•´ Cloud SQLì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ê³ ,</p>

    <p>ì•„ë˜ìª½ì˜ ë„¤íŠ¸ì›Œí¬ ì¶”ê°€ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì›Œë“œí”„ë ˆìŠ¤ <strong>ì›¹ì„œë²„ì˜ ê³µê°œ IP ì£¼ì†Œë¥¼ ë“±ë¡</strong>í•©ë‹ˆë‹¤.</p>

    <p><br /></p>

    <p>ë‹¤ìŒì€ ì›Œë“œí”„ë ˆìŠ¤ ì›¹ì„œë²„ì—ì„œ Cloud SQLì— ì ‘ì†í•˜ëŠ” ê³¼ì •ì„ ì •ë¦¬í•œ ëª…ë ¹ì–´ì…ë‹ˆë‹¤.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">[</span>root@instance-wordpress wordpress]# yum <span class="nt">-y</span> <span class="nb">install </span>mysql
  <span class="o">[</span>root@instance-wordpress wordpress]# mysql <span class="nt">-u</span> root <span class="nt">-p</span> <span class="nt">-h</span> 34.64.148.237
  Enter password: 
  Welcome to the MariaDB monitor.  Commands end with <span class="p">;</span> or <span class="se">\\</span>g.
  Your MySQL connection <span class="nb">id </span>is 343
  Server version: 5.7.25-google-log <span class="o">(</span>Google<span class="o">)</span>

  Copyright <span class="o">(</span>c<span class="o">)</span> 2000, 2018, Oracle, MariaDB Corporation Ab and others.

  Type <span class="s1">'help;'</span> or <span class="s1">'\\h'</span> <span class="k">for </span>help. Type <span class="s1">'\\c'</span> to clear the current input statement.

  MySQL <span class="o">[(</span>none<span class="o">)]&gt;</span> show databases<span class="p">;</span>
  +--------------------+
  | Database           |
  +--------------------+
  | information_schema |
  | mysql              |
  | performance_schema |
  | sys                |
  | wordpress          |
  +--------------------+
  5 rows <span class="k">in </span><span class="nb">set</span> <span class="o">(</span>0.01 sec<span class="o">)</span>

  MySQL <span class="o">[(</span>none<span class="o">)]&gt;</span> <span class="nb">exit
  </span>Bye

  <span class="o">[</span>root@instance-wordpress ~]# <span class="nb">mkdir</span> /cloudsql
  <span class="o">[</span>root@instance-wordpress ~]# <span class="nb">chmod </span>777 /cloudsql
  <span class="o">[</span>root@instance-wordpress ~]# wget https://dl.google.com/cloudsql/cloud_sql_proxy.linux.amd64 <span class="nt">-O</span> cloud_sql_proxy
  <span class="nt">--2020-08-02</span> 10:39:20--  https://dl.google.com/cloudsql/cloud_sql_proxy.linux.amd64
  Resolving dl.google.com <span class="o">(</span>dl.google.com<span class="o">)</span>... 172.217.161.238, 2404:6800:400a:80c::200e
  Connecting to dl.google.com <span class="o">(</span>dl.google.com<span class="o">)</span>|172.217.161.238|:443... connected.
  HTTP request sent, awaiting response... 200 OK
  Length: 14492253 <span class="o">(</span>14M<span class="o">)</span> <span class="o">[</span>application/octet-stream]
  Saving to: â€˜cloud_sql_proxyâ€™

  100%[<span class="o">=========================================================================&gt;]</span> 14,492,253  22.0MB/s   <span class="k">in </span>0.6s   

  2020-08-02 10:39:21 <span class="o">(</span>22.0 MB/s<span class="o">)</span> - â€˜cloud_sql_proxyâ€™ saved <span class="o">[</span>14492253/14492253]

  <span class="o">[</span>root@instance-wordpress ~]# <span class="nb">chmod</span> +x cloud_sql_proxy
  <span class="o">[</span>root@instance-wordpress ~]# vim wordpress-key.json
  <span class="c"># wpmanager ì„œë¹„ìŠ¤ ê³„ì •ì—ì„œ í‚¤ë¥¼ ë§Œë“¤ ë•Œ ìƒì„±ëœ json ë‚´ìš© ì…ë ¥</span>

  <span class="o">[</span>root@instance-wordpress ~]# ./cloud_sql_proxy <span class="nt">-dir</span><span class="o">=</span>/cloudsql <span class="nt">-instances</span><span class="o">=</span>cccr-gcp-project:asia-northeast3:mysql-wordpress <span class="nt">-credential_file</span><span class="o">=</span>/root/wordpress-key.json &amp;
  <span class="o">[</span>1] 15932
  <span class="o">[</span>root@instance-wordpress ~]# 2020/08/02 15:23:07 Rlimits <span class="k">for </span>file descriptors <span class="nb">set </span>to <span class="o">{</span>&amp;<span class="o">{</span>8500 8500<span class="o">}}</span>
  2020/08/02 15:23:07 using credential file <span class="k">for </span>authentication<span class="p">;</span> <span class="nv">email</span><span class="o">=</span>wpmanager@cccr-gcp-project.iam.gserviceaccount.com
  2020/08/02 15:23:07 Listening on /cloudsql/cccr-gcp-project:asia-northeast3:mysql-wordpress <span class="k">for </span>cccr-gcp-project:asia-northeast3:mysql-wordpress
  2020/08/02 15:23:07 Ready <span class="k">for </span>new connections<span class="k">*</span>

  <span class="o">[</span>root@instance-wordpress ~]# mysql <span class="nt">-u</span> root <span class="nt">-p</span> <span class="nt">-S</span> /cloudsql/cccr-gcp-project:asia-northeast3:mysql-wordpress 
  Enter password: 
  2020/08/02 10:52:05 New connection <span class="k">for</span> <span class="s2">"cccr-gcp-project:asia-northeast3:mysql-wordpress"</span>
  Welcome to the MariaDB monitor.  Commands end with <span class="p">;</span> or <span class="se">\\</span>g.
  Your MySQL connection <span class="nb">id </span>is 429
  Server version: 5.7.25-google-log <span class="o">(</span>Google<span class="o">)</span>

  Copyright <span class="o">(</span>c<span class="o">)</span> 2000, 2018, Oracle, MariaDB Corporation Ab and others.

  Type <span class="s1">'help;'</span> or <span class="s1">'\\h'</span> <span class="k">for </span>help. Type <span class="s1">'\\c'</span> to clear the current input statement.

  MySQL <span class="o">[(</span>none<span class="o">)]&gt;</span> <span class="nb">exit
  </span>Bye
  2020/08/02 10:52:24 Client closed <span class="nb">local </span>connection on /cloudsql/cccr-gcp-project:asia-northeast3:mysql-wordpress

  <span class="o">[</span>root@instance-wordpress ~]# ps
  PID TTY          TIME CMD
  1467 pts/0    00:00:00 <span class="nb">sudo
  </span>1469 pts/0    00:00:00 su
  1470 pts/0    00:00:00 bash
  16476 pts/0    00:00:00 cloud_sql_proxy
  16517 pts/0    00:00:00 ps
  <span class="o">[</span>root@instance-wordpress ~]# <span class="nb">kill</span> <span class="nt">-9</span> 16476
  <span class="o">[</span>1]+  Killed                  ./cloud_sql_proxy <span class="nt">-dir</span><span class="o">=</span>/cloudsql <span class="nt">-instances</span><span class="o">=</span>cccr-gcp-project:asia-northeast3:mysql-wordpress <span class="nt">-credential_file</span><span class="o">=</span>wordpress-key.json
  <span class="o">[</span>root@instance-wordpress ~]# <span class="nb">mkdir</span> <span class="nt">-p</span> /opt/cloudsqlproxy/
  <span class="o">[</span>root@instance-wordpress ~]# <span class="nb">cp </span>cloud_sql_proxy /opt/cloudsqlproxy/
  <span class="o">[</span>root@instance-wordpress ~]# vim ~/cloudsqlproxy.service
  <span class="o">[</span>Unit]
  <span class="nv">Description</span><span class="o">=</span>Google Cloud SQL Proxy
  <span class="nv">After</span><span class="o">=</span>syslog.target network.target auditd.service

  <span class="o">[</span>Service]
  <span class="nv">ExecStart</span><span class="o">=</span>/opt/cloudsqlproxy/cloud_sql_proxy <span class="nt">-dir</span><span class="o">=</span>/cloudsql <span class="nt">-instances</span><span class="o">=</span>cccr-gcp-project:asia-northeast3:mysql-wordpress <span class="nt">-credential_file</span><span class="o">=</span>/root/wordpress-key.json
  <span class="nv">ExecStop</span><span class="o">=</span>/bin/kill <span class="nt">-TERM</span> <span class="nv">$MAINPID</span>

  <span class="o">[</span>Install]
  <span class="nv">WantedBy</span><span class="o">=</span>multi-user.target

  <span class="o">[</span>root@instance-wordpress ~]# <span class="nb">cp</span> ~/cloudsqlproxy.service /etc/systemd/system/
  <span class="o">[</span>root@instance-wordpress ~]# systemctl daemon-reload
  <span class="o">[</span>root@instance-wordpress ~]# systemctl start cloudsqlproxy
  <span class="o">[</span>root@instance-wordpress ~]# systemctl <span class="nb">enable </span>cloudsqlproxy
  Created symlink from /etc/systemd/system/multi-user.target.wants/cloudsqlproxy.service to /etc/systemd/system/cloudsqlproxy.service.
  <span class="o">[</span>root@instance-wordpress ~]# systemctl status cloudsqlproxy
  â— cloudsqlproxy.service - Google Cloud SQL Proxy
      Loaded: loaded <span class="o">(</span>/etc/systemd/system/cloudsqlproxy.service<span class="p">;</span> disabled<span class="p">;</span> vendor preset: disabled<span class="o">)</span>
      Active: active <span class="o">(</span>running<span class="o">)</span> since Sun 2020-08-02 10:55:53 UTC<span class="p">;</span> 13s ago
  Main PID: 16524 <span class="o">(</span>cloud_sql_proxy<span class="o">)</span>
      CGroup: /system.slice/cloudsqlproxy.service
              â””â”€16524 /opt/cloudsqlproxy/cloud_sql_proxy <span class="nt">-dir</span><span class="o">=</span>/cloudsql <span class="nt">-instances</span><span class="o">=</span>cccr-gcp-project:asia-northeast3...

  Aug 02 10:55:53 instance-wordpress systemd[1]: Started Google Cloud SQL Proxy.
  Aug 02 10:55:53 instance-wordpress cloud_sql_proxy[16524]: 2020/08/02 10:55:53 Rlimits <span class="k">for </span>file descriptors s...0<span class="o">}}</span>
  Aug 02 10:55:53 instance-wordpress cloud_sql_proxy[16524]: 2020/08/02 10:55:53 using credential file <span class="k">for </span>auth...com
  Aug 02 10:55:53 instance-wordpress cloud_sql_proxy[16524]: 2020/08/02 10:55:53 Listening on /cloudsql/cccr-gc...ess
  Aug 02 10:55:53 instance-wordpress cloud_sql_proxy[16524]: 2020/08/02 10:55:53 Ready <span class="k">for </span>new connections
  Hint: Some lines were ellipsized, use <span class="nt">-l</span> to show <span class="k">in </span>full.

  <span class="o">[</span>root@instance-wordpress wordpress]# vim /var/www/html/wordpress/wp-config.php
  define<span class="o">(</span> <span class="s1">'DB_HOST'</span>, <span class="s1">'localhost:/cloudsql/cccr-gcp-project:asia-northeast3:mysql-wordpress'</span> <span class="o">)</span><span class="p">;</span>
</code></pre></div>    </div>

    <p>Cloud SQL Proxyê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•œ í›„ì— ë°ëª¬ì„ ìƒì„±í•˜ì—¬ cloudsqlproxy ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ë˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.</p>

    <p>wordpress-key.json íŒŒì¼ì˜ ë‚´ìš©ì—ëŠ” ìœ„ì—ì„œ wpmanager ì„œë¹„ìŠ¤ ê³„ì •ì˜ í‚¤ë¥¼ ë§Œë“¤ ë•Œ ìƒì„±ëœ json ë‚´ìš©ì„ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.</p>

    <p>ì›Œë“œí”„ë ˆìŠ¤ì˜ ì„¤ì •íŒŒì¼ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ê°’ì— cloudsqlproxy ì„œë¹„ìŠ¤ë¡œ ìƒê²¨ë‚œ ì†Œì¼“ íŒŒì¼ì˜ ê²½ë¡œë¥¼ ì ì–´ì£¼ê³  ì •ìƒì ìœ¼ë¡œ ì—°ê²°ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>

    <p><br /></p>

    <p>Cloud SQLì— ì •ìƒì ìœ¼ë¡œ ì—°ê²°ë˜ì—ˆë‹¤ë©´ ì›Œë“œí”„ë ˆìŠ¤ë¥¼ ì„¤ì¹˜í•˜ê³  ì›Œë“œí”„ë ˆìŠ¤ ë°ì´í„°ë² ì´ìŠ¤ì™€ í…Œì´ë¸”ì´ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ë„ë¡ í•©ë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_8.png" alt="wordpress_installation" width="750" height="554" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 8] ì›Œë“œí”„ë ˆìŠ¤ ì„¤ì¹˜</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_9.png" alt="wordpress_theme" width="1000" height="541" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 9] ì›Œë“œí”„ë ˆìŠ¤ í…Œë§ˆ ì ìš©</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ì›Œë“œí”„ë ˆìŠ¤ ì„¤ì¹˜ ë° í…Œë§ˆ ì ìš©ì´ ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ í›„ì— Cloud SQLì—ì„œ ì›Œë“œí”„ë ˆìŠ¤ ë°ì´í„°ë² ì´ìŠ¤ì˜ í…Œì´ë¸”ì´ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="p">[</span><span class="n">root</span><span class="o">@</span><span class="n">instance</span><span class="o">-</span><span class="n">wordpress</span> <span class="o">~</span><span class="p">]</span><span class="c1"># mysql -u root -p -S /cloudsql/cccr-gcp-project:asia-northeast3:mysql-wordpress
</span>  <span class="n">Enter</span> <span class="n">password</span><span class="p">:</span> 
  <span class="n">Welcome</span> <span class="n">to</span> <span class="n">the</span> <span class="n">MariaDB</span> <span class="n">monitor</span><span class="p">.</span>  <span class="n">Commands</span> <span class="n">end</span> <span class="k">with</span> <span class="p">;</span> <span class="ow">or</span> \\<span class="n">g</span><span class="p">.</span>
  <span class="n">Your</span> <span class="n">MySQL</span> <span class="n">connection</span> <span class="nb">id</span> <span class="ow">is</span> <span class="mi">1478</span>
  <span class="n">Server</span> <span class="n">version</span><span class="p">:</span> <span class="mf">5.7</span><span class="p">.</span><span class="mi">25</span><span class="o">-</span><span class="n">google</span><span class="o">-</span><span class="n">log</span> <span class="p">(</span><span class="n">Google</span><span class="p">)</span>

  <span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Oracle</span><span class="p">,</span> <span class="n">MariaDB</span> <span class="n">Corporation</span> <span class="n">Ab</span> <span class="ow">and</span> <span class="n">others</span><span class="p">.</span>

  <span class="n">Type</span> <span class="s">'help;'</span> <span class="ow">or</span> <span class="s">'</span><span class="se">\\</span><span class="s">h'</span> <span class="k">for</span> <span class="n">help</span><span class="p">.</span> <span class="n">Type</span> <span class="s">'</span><span class="se">\\</span><span class="s">c'</span> <span class="n">to</span> <span class="n">clear</span> <span class="n">the</span> <span class="n">current</span> <span class="nb">input</span> <span class="n">statement</span><span class="p">.</span>

  <span class="n">MySQL</span> <span class="p">[(</span><span class="n">none</span><span class="p">)]</span><span class="o">&gt;</span> <span class="n">use</span> <span class="n">wordpress</span>
  <span class="n">Reading</span> <span class="n">table</span> <span class="n">information</span> <span class="k">for</span> <span class="n">completion</span> <span class="n">of</span> <span class="n">table</span> <span class="ow">and</span> <span class="n">column</span> <span class="n">names</span>
  <span class="n">You</span> <span class="n">can</span> <span class="n">turn</span> <span class="n">off</span> <span class="n">this</span> <span class="n">feature</span> <span class="n">to</span> <span class="n">get</span> <span class="n">a</span> <span class="n">quicker</span> <span class="n">startup</span> <span class="k">with</span> <span class="o">-</span><span class="n">A</span>

  <span class="n">Database</span> <span class="n">changed</span>
  <span class="n">MySQL</span> <span class="p">[</span><span class="n">wordpress</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">show</span> <span class="n">tables</span><span class="p">;</span>
  <span class="o">+-----------------------+</span>
  <span class="o">|</span> <span class="n">Tables_in_wordpress</span>   <span class="o">|</span>
  <span class="o">+-----------------------+</span>
  <span class="o">|</span> <span class="n">wp_commentmeta</span>        <span class="o">|</span>
  <span class="o">|</span> <span class="n">wp_comments</span>           <span class="o">|</span>
  <span class="o">|</span> <span class="n">wp_links</span>              <span class="o">|</span>
  <span class="o">|</span> <span class="n">wp_options</span>            <span class="o">|</span>
  <span class="o">|</span> <span class="n">wp_postmeta</span>           <span class="o">|</span>
  <span class="o">|</span> <span class="n">wp_posts</span>              <span class="o">|</span>
  <span class="o">|</span> <span class="n">wp_term_relationships</span> <span class="o">|</span>
  <span class="o">|</span> <span class="n">wp_term_taxonomy</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">wp_termmeta</span>           <span class="o">|</span>
  <span class="o">|</span> <span class="n">wp_terms</span>              <span class="o">|</span>
  <span class="o">|</span> <span class="n">wp_usermeta</span>           <span class="o">|</span>
  <span class="o">|</span> <span class="n">wp_users</span>              <span class="o">|</span>
  <span class="o">+-----------------------+</span>
  <span class="mi">12</span> <span class="n">rows</span> <span class="ow">in</span> <span class="nb">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</code></pre></div>    </div>

    <p><br /></p>
  </li>
  <li>
    <p><strong>ê´€ë¦¬í˜• ë¡œë“œ ë°¸ëŸ°ì‹± êµ¬ì„±</strong>   <a name="list2_4"></a></p>

    <p>GCLB(Google Cloud Load Balancing)ì„ êµ¬ì„±í•˜ê¸° ìœ„í•´ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëŒ€ìƒìœ¼ë¡œ í•  ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ì´ ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ì€ <strong>ì˜¤í†  ìŠ¤ì¼€ì¼ë§(Auto-scaling)ì„ ìœ„í•œ</strong> <code class="language-plaintext highlighter-rouge">ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹</code>ê³¼ <strong>í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì§ì ‘ VM ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆëŠ”</strong> <code class="language-plaintext highlighter-rouge">ë¹„ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹</code>ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.</p>

    <p><br /></p>

    <p>ë³¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ì„ êµ¬ì„±í•˜ê³  ë¶€í•˜ ë¶„ì‚°ê¸°ë¥¼ ìƒì„±í•˜ì—¬ ë¡œìŠ¤ ë°¸ëŸ°ì‹± í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.</p>

    <p>ë¨¼ì € VM ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ <code class="language-plaintext highlighter-rouge">ìŠ¤ëƒ…ìƒ·ì„ ìƒì„±</code>í•˜ê³ , ìƒì„±í•œ ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">ì´ë¯¸ì§€ë¥¼ ìƒì„±</code>í•©ë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_10.png" alt="create_snapshot" width="400" height="566" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 10] ìŠ¤ëƒ…ìƒ· ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_11.png" alt="create_image" width="400" height="689" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 11] ì´ë¯¸ì§€ ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ì´ë¯¸ì§€ê¹Œì§€ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆë‹¤ë©´ ë‹¤ìŒìœ¼ë¡œ ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ì„ ë§Œë“¤ê¸° ì „ì— ë‹¤ìŒ [ê·¸ë¦¼ 12]ê³¼ ê°™ì´ <code class="language-plaintext highlighter-rouge">ì¸ìŠ¤í„´ìŠ¤ í…œí”Œë¦¿ì„ ìƒì„±</code>í•©ë‹ˆë‹¤.</p>

    <p>ê·¸ë£¹ì— ì†í•œ VMì˜ ì¢…ë¥˜ê°€ ì—¬ëŸ¬ ê°œë¼ë©´ ëª¨ë“  VMì˜ ìš´ì˜ì²´ì œì˜ ì´ë¯¸ì§€ë¥¼ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_12.png" alt="create_instance_template" width="400" height="881" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 12] ì¸ìŠ¤í„´ìŠ¤ í…œí”Œë¦¿ ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ì¸ìŠ¤í„´ìŠ¤ í…œí”Œë¦¿ì„ ì •ìƒì ìœ¼ë¡œ ìƒì„±í•œ í›„ì— ë‹¤ìŒ [ê·¸ë¦¼ 13]ê³¼ ê°™ì´ <code class="language-plaintext highlighter-rouge">ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ì„ ìƒì„±</code>í•©ë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_13.png" alt="create_instance_group" width="700" height="1114" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 13] ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ê¹Œì§€ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆë‹¤ë©´ ë¶€í•˜ ë¶„ì‚°ê¸°ë¥¼ ìƒì„±í•  ì¤€ë¹„ê°€ ëë‚¬ìŠµë‹ˆë‹¤.</p>

    <p>íƒìƒ‰ ë©”ë‰´ì—ì„œ <strong>[ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤] - [ë¶€í•˜ ë¶„ì‚°]</strong> íƒ­ì— ë“¤ì–´ì™€ì„œ <code class="language-plaintext highlighter-rouge">ë¶€í•˜ ë¶„ì‚°ê¸° ë§Œë“¤ê¸°</code>ë¥¼ ëˆŒëŸ¬ì¤ë‹ˆë‹¤.</p>

    <p>HTTP(S), TCP, UDPì— ëŒ€í•œ ë¶€í•˜ ë¶„ì‚°ê¸°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìœ¼ë©° ë³¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì›Œë“œí”„ë ˆìŠ¤ë¥¼ í†µí•œ ì›¹ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¶€í•˜ ë¶„ì‚° ì‹œì¼œì£¼ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">HTTP(S) ë¶€í•˜ ë¶„ì‚°ê¸°</code>ë¥¼ ì„ íƒí•˜ê³  <code class="language-plaintext highlighter-rouge">ì¸í„°ë„· íŠ¸ë˜í”½ì„ VMìœ¼ë¡œ ë¶„ì‚°</code>ì„ ëˆŒëŸ¬ì¤ë‹ˆë‹¤.</p>

    <p><br /></p>

    <p>ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ì˜¤ë©´ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ì™€ í”„ëŸ°íŠ¸ì—”ë“œ ì„œë¹„ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” í™”ë©´ìœ¼ë¡œ ë„˜ì–´ì˜¤ê²Œ ë©ë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_14.png" alt="create_lb_backend" width="400" height="589" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 14] ë°±ì—”ë“œ ì„œë¹„ìŠ¤ ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ê¸°ì¡´ì— ë§Œë“¤ì–´ë‘” ë°±ì—”ë“œ ì„œë¹„ìŠ¤ê°€ ì—†ê¸° ë•Œë¬¸ì— ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ìƒì„±ì„ ì„ íƒí•˜ê³  ë°±ì•¤ë“œ ì„œë¹„ìŠ¤ì˜ ì´ë¦„ê³¼ ì•ì—ì„œ ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ì„ ì„ íƒí•˜ë©´ ë©ë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œëŠ” ë¡œë“œë°¸ëŸ°ì„œì—ì„œ ë“¤ì–´ì˜¨ íŠ¸ë˜í”½ì„ ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ì˜ ì¸ìŠ¤í„´ìŠ¤ë“¤ì˜ ì–´ëŠ í¬íŠ¸ë¡œ ì „ë‹¬í•  ê²ƒì¸ì§€ë¥¼ í¬íŠ¸ ë²ˆí˜¸ì— ì •ì˜í•˜ëŠ”ë°, ì—¬ê¸°ì„œëŠ” HTTP íŠ¸ë˜í”½ì„ ì „ë‹¬í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— 80ì„ ì„ íƒí•©ë‹ˆë‹¤.</p>

    <p><br /></p>

    <p>ë°±ì—”ë“œ ì„œë¹„ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ ìƒíƒœ í™•ì¸(Health check)ì„ ì„ íƒí•˜ëŠ” í•­ëª©ì´ ìˆëŠ”ë° ë§ˆì°¬ê°€ì§€ë¡œ ê¸°ì¡´ì— ë§Œë“¤ì–´ë‘” ìƒíƒœ í™•ì¸ì´ ì—†ê¸° ë•Œë¬¸ì— ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_15.png" alt="create_lb_check" width="400" height="465" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 15] ìƒíƒœ í™•ì¸ ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ìƒíƒœ í™•ì¸ì€ ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ ë‚´ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ì–‘í˜¸í•œì§€ë¥¼ ì²´í¬í•˜ê³  ë§Œì•½ì— ì •ìƒì ì´ì§€ ì•Šìœ¼ë©´ ë¹„ì •ìƒ ë…¸ë“œëŠ” ë¶€í•˜ ë¶„ì‚°ì—ì„œ ë¹¼ë²„ë¦¬ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. í”„ë¡œí† ì½œì€ HTTPë¥¼ ì…ë ¥í•˜ê³ , í¬íŠ¸ì—ëŠ” HTTP í¬íŠ¸ì¸ 80í¬íŠ¸, ê·¸ë¦¬ê³  ì„œë¹„ìŠ¤ê°€ ì •ìƒì¸ì§€ë¥¼ í™•ì¸í•˜ëŠ” í™•ì¸ ê°„ê²©ì€ ì²´í¬ ì£¼ê¸°ì´ê³ , ì œí•œ ì‹œê°„ì€ ì´ ì‹œê°„(ì´ˆ)ë‚´ì— ì‘ë‹µì´ ì—†ìœ¼ë©´ ì¥ì• ë¼ê³  íŒë‹¨ì„ í•©ë‹ˆë‹¤.</p>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_16.png" alt="create_lb_frontend" width="400" height="493" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 16] í”„ëŸ°íŠ¸ì—”ë“œ ì„œë¹„ìŠ¤ ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ë§ˆì§€ë§‰ìœ¼ë¡œ í”„ëŸ°íŠ¸ì—”ë“œ ì„œë¹„ìŠ¤ë¥¼ ì„¤ì •í•˜ëŠ”ë°, ì—¬ê¸°ì„œëŠ” ì–´ë–¤ í”„ë¡œí† ì½œì„ ì–´ë–¤ IPì™€ í¬íŠ¸ë¡œ ë°›ì„ ê²ƒì¸ì§€, HTTPSì˜ ê²½ìš°ì—ëŠ” SSL ì¸ì¦ì„œë¥¼ ì„¤ì •í•˜ëŠ” ì‘ì—…ì„ í•©ë‹ˆë‹¤. ë³¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” HTTP í”„ë¡œí† ì½œì„ 80 í¬íŠ¸ë¡œ ì„¤ì •í•˜ê¸° ë•Œë¬¸ì— [ê·¸ë¦¼ 16]ê³¼ ê°™ì´ ì„¤ì •í•˜ê³ , ë¶€í•˜ ë¶„ì‚° ì´ë¦„ì„ ì…ë ¥í•˜ì—¬ ìƒì„±ì„ ì™„ë£Œí•©ë‹ˆë‹¤.</p>

    <p><br /></p>

    <p>ì •ìƒì ìœ¼ë¡œ ë¶€í•˜ ë¶„ì‚°ê¸°ê°€ ìƒì„±ì´ ë˜ë©´ ë‹¤ìŒ [ê·¸ë¦¼ 17]ê³¼ ê°™ì´ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ì— ì§€ì •ëœ ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ì— í•´ë‹¹í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ëª¨ë‘ ì •ìƒ ë™ì‘í•˜ëŠ” í™”ë©´ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_17.png" alt="lb_detail" width="800" height="404" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 17] ë¶€í•˜ ë¶„ì‚°ê¸° ì„¸ë¶€ ì •ë³´</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>
  </li>
  <li>
    <p><strong>Bucket ìƒì„± ë° ë°±ì—… ì„¤ì •</strong>   <a name="list2_5"></a></p>

    <p>íƒìƒ‰ ë©”ë‰´ì—ì„œ <strong>[Storage] - [ë¸Œë¼ìš°ì €]</strong> íƒ­ì„ ëˆŒëŸ¬ <strong>ë²„í‚· ìƒì„±</strong> ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë²„í‚·ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_18.png" alt="create_bucket" width="900" height="145" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 18] ë²„í‚· ìƒì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ë²„í‚· ì´ë¦„ì„ ì…ë ¥í•˜ê³  ë¦¬ì „ì„ ì•„ì‹œì•„ë¡œ ì„¤ì •í•œ í›„ì— ë‚˜ë¨¸ì§€ëŠ” ê¸°ë³¸ ê°’ìœ¼ë¡œ ìƒì„±í•˜ê²Œ ë˜ë©´ ìœ„ì˜ [ê·¸ë¦¼ 18]ê³¼ ê°™ì´ ë²„í‚·ì´ ìƒì„±ëœ ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

    <p><br /></p>

    <p>ìƒì„±í•œ ë²„í‚·ì˜ ê¶Œí•œ íƒ­ì— ë“¤ì–´ì˜¤ë©´ ë²„í‚·ì— ì ‘ê·¼ ê°€ëŠ¥í•œ êµ¬ì„±ì›ë“¤ê³¼ ì—­í• ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

    <p>ë‹¤ìŒ [ê·¸ë¦¼ 19]ì—ì„œ ë³´ì´ëŠ” <strong>ì¶”ê°€</strong> ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ìƒˆë¡œìš´ êµ¬ì„±ì›ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.</p>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_19.png" alt="bucket_allUsers" width="500" height="223" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 19] ë²„í‚· allUsers êµ¬ì„±ì› ì¶”ê°€</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p><code class="language-plaintext highlighter-rouge">allUsers</code> êµ¬ì„±ì›ì— <code class="language-plaintext highlighter-rouge">ì €ì¥ì†Œ ê°œì²´ ê´€ë¦¬ì</code> ì—­í• ì„ ì£¼ì–´ ëª¨ë“  ì‚¬ìš©ìë“¤ì´ ì €ì¥ì†Œì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.</p>

    <p><br /></p>

    <p>ë‹¤ìŒì€ Cloud SQLì— ì €ì¥ëœ wordpress ë°ì´í„°ë² ì´ìŠ¤ë¥¼ <code class="language-plaintext highlighter-rouge">mysqldump</code>í•˜ì—¬ <code class="language-plaintext highlighter-rouge">crontab</code>ì„ í†µí•´ ì£¼ê¸°ì ìœ¼ë¡œ ë°±ì—…í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ì…ë‹ˆë‹¤.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">[</span>root@instance-wordpress ~]# vim /etc/my.cnf
  <span class="o">[</span>mysqldump]
  <span class="nv">user</span><span class="o">=</span>root
  <span class="nv">password</span><span class="o">=</span>Input Your Password

  <span class="o">[</span>root@instance-wordpress ~]# vim cloudsql_backup.sh
  <span class="c">#!/bin/bash</span>
  <span class="nv">db_instance</span><span class="o">=</span>mysql-wordpress
  <span class="nv">db_name</span><span class="o">=</span>wordpress
  <span class="nv">db_user</span><span class="o">=</span>root
  <span class="nv">bucket_name</span><span class="o">=</span>gs://bucket-mysql-wordpress
  <span class="nv">socket_path</span><span class="o">=</span>/cloudsql/cccr-gcp-project:asia-northeast3:mysql-wordpress
  <span class="nv">date_YYYYMMDDHHMMSS</span><span class="o">=</span><span class="sb">`</span><span class="nb">date</span> <span class="s1">'+%Y%m%d%H%M%S'</span><span class="sb">`</span>
  <span class="nv">backupfile_name</span><span class="o">=</span>wordpress_<span class="k">${</span><span class="nv">date_YYYYMMDDHHMMSS</span><span class="k">}</span>.sql

  <span class="nb">echo</span> <span class="s2">"Cloud SQLl daily backup start.."</span>

  <span class="c">#gcloud sql export csv $db_instance $bucket_name/test.csv --database=$db_name --query=$sql_query</span>
  mysqldump <span class="nt">-u</span> <span class="nv">$db_user</span> <span class="nt">-S</span> <span class="nv">$socket_path</span> <span class="nt">--databases</span> <span class="nv">$db_name</span> <span class="nt">--hex-blob</span> <span class="nt">--single-transaction</span> <span class="nt">--default-character-set</span><span class="o">=</span>utf8mb4 <span class="o">&gt;</span> <span class="nv">$backupfile_name</span>

  gsutil <span class="nb">mv</span> <span class="nv">$backupfile_name</span> <span class="nv">$bucket_name</span>

  <span class="nb">echo</span> <span class="s2">"Cloud SQL daily backup stop.."</span>

  <span class="o">[</span>root@instance-wordpress ~]# crontab <span class="nt">-e</span>
  0 <span class="k">*</span>/3 <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> /root/cloudsql_backup.sh
</code></pre></div>    </div>
    <p><br /></p>

    <p>Cloud SQLì„ ë°±ì—…í•˜ëŠ” ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì—¬ crontabì— ë“±ë¡í•˜ì—¬ 3ì‹œê°„ ì£¼ê¸°ë¡œ mysqldumpê°€ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í•´ë‘ê³  ì¼ì • ì‹œê°„ì´ ì§€ë‚œ í›„ì— ë²„í‚·ì— ì •ìƒì ìœ¼ë¡œ ë°±ì—…ë˜ì–´ ì €ì¥ëëŠ”ì§€ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_20.png" alt="cloudsql_bucket_backup1" width="800" height="323" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 20] crontabì„ ì‚¬ìš©í•œ Cloud SQLì˜ ì£¼ê¸°ì ì¸ ë°±ì—…</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ìœ„ì˜ [ê·¸ë¦¼ 20]ì—ì„œ ìµœì¢… ìˆ˜ì • ë‚ ì§œë¥¼ í™•ì¸í•´ë³´ë©´ 3ì‹œê°„ ì£¼ê¸°ë¡œ ì €ì¥ë˜ì–´ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

    <p><br /></p>

    <p>ê°™ì€ í˜•íƒœë¡œ ì´ë²ˆì—ëŠ” syslogë¥¼ ë°±ì—…í•˜ëŠ” ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì—¬ crontabì— ë“±ë¡í•©ë‹ˆë‹¤.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">[</span>root@instance-wordpress ~]# vim apache_log_backup.sh
  <span class="c">#!/bin/bash</span>

  <span class="nb">echo</span> <span class="s2">"syslog daily backup start.."</span>

  <span class="nb">cat</span> /var/log/messages | <span class="nb">grep</span> <span class="nt">-iE</span> <span class="s2">"apache|wordpress"</span> <span class="o">&gt;&gt;</span> /root/apache_log_backup_<span class="si">$(</span><span class="nb">date</span> <span class="s1">'+%y-%m-%d'</span><span class="si">)</span>.log
  gsutil <span class="nb">cp</span> /root/apache_log_backup_<span class="k">*</span>.log gs://bucket-mysql-wordpress/apache_log_backup/
  <span class="nb">rm</span> <span class="nt">-rf</span> /root/<span class="k">*</span>.log

  <span class="nb">echo</span> <span class="s2">"syslog daily backup stop.."</span>

  <span class="o">[</span>root@instance-wordpress ~]# crontab <span class="nt">-e</span>
  <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> /root/apache_log_backup.sh
</code></pre></div>    </div>

    <p><br /></p>

    <p>ì´ë²ˆì—ëŠ” ë§¤ ë¶„ë§ˆë‹¤ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ë„ë¡ crontabì— ë“±ë¡í•˜ê³  ë²„í‚·ì„ í™•ì¸í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_21.png" alt="syslog_bucket_backup" width="800" height="383" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 21] crontabì„ ì‚¬ìš©í•œ syslogì˜ ì£¼ê¸°ì ì¸ ë°±ì—…</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>
  </li>
  <li>
    <p><strong>Stack Driverë¥¼ í™œìš©í•œ ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹… ì‹œìŠ¤í…œ êµ¬ì¶•</strong>   <a name="list2_6"></a></p>

    <ul>
      <li>
        <p>VM ì¸ìŠ¤í„´ìŠ¤ì— monitoring-agent ì„¤ì¹˜</p>

        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span>curl <span class="nt">-sSO</span> https://dl.google.com/cloudagents/add-monitoring-agent-repo.sh
  <span class="nv">$ </span><span class="nb">sudo </span>bash add-monitoring-agent-repo.sh
  <span class="nv">$ </span><span class="nb">sudo </span>yum <span class="nt">-y</span> update
  <span class="nv">$ </span><span class="nb">sudo </span>yum <span class="nt">-y</span> <span class="nb">install </span>stackdriver-agent

  <span class="nv">$ </span><span class="nb">sudo </span>systemctl start stackdriver-agent
  <span class="nv">$ </span><span class="nb">sudo </span>systemctl <span class="nb">enable </span>stackdriver-agent
</code></pre></div>        </div>
      </li>
      <li>
        <p>VM ì¸ìŠ¤í„´ìŠ¤ì— logging-agent ì„¤ì¹˜</p>

        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span>curl <span class="nt">-sSO</span> https://dl.google.com/cloudagents/add-logging-agent-repo.sh
  <span class="nv">$ </span><span class="nb">sudo </span>bash add-logging-agent-repo.sh
  <span class="nv">$ </span><span class="nb">sudo </span>yum <span class="nt">-y</span> update
  <span class="nv">$ </span><span class="nb">sudo </span>yum <span class="nt">-y</span> <span class="nb">install </span>google-fluentd
  <span class="nv">$ </span><span class="nb">sudo </span>yum <span class="nt">-y</span> <span class="nb">install </span>google-fluentd-catch-all-config-structured

  <span class="nv">$ </span><span class="nb">sudo </span>systemctl start google-fluentd
  <span class="nv">$ </span><span class="nb">sudo </span>systemctl <span class="nb">enable </span>google-fluentd
</code></pre></div>        </div>
      </li>
    </ul>

    <p><br /></p>

    <p>ëª¨ë‹ˆí„°ë§ê³¼ ë¡œê¹…ì„ í•  VM ì¸ìŠ¤í„´ìŠ¤ì— ì—ì´ì „íŠ¸ë¥¼ ì„¤ì¹˜í•˜ê³  <strong>[ëª¨ë‹ˆí„°ë§] - [ëŒ€ì‹œë³´ë“œ]</strong> íƒ­ì„ ëˆŒëŸ¬ ë“¤ì–´ê°‘ë‹ˆë‹¤.</p>

    <p>ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ì— ë“¤ì–´ì˜¤ë©´ <code class="language-plaintext highlighter-rouge">Create Dashboard</code> ë²„íŠ¼ì„ í†µí•´ ìƒˆë¡œìš´ ëŒ€ì‹œë³´ë“œë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

    <p>ì›í•˜ëŠ” ëŒ€ì‹œë³´ë“œì˜ ì´ë¦„ì„ ì…ë ¥í•˜ê³  ëŒ€ì‹œë³´ë“œë¥¼ ìƒì„±í•˜ë©´ ìš°ì¸¡ ìƒë‹¨ì— <code class="language-plaintext highlighter-rouge">Add Chart</code> ë²„íŠ¼ì„ ëˆŒëŸ¬ ì›í•˜ëŠ” ì°¨íŠ¸ë“¤ì„ ì¶”ê°€í•˜ì—¬ ëŒ€ì‹œë³´ë“œë¥¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_22.png" alt="add_chart" width="800" height="402" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 22] ëŒ€ì‹œë³´ë“œ ì°¨íŠ¸ ì¶”ê°€</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ìœ„ì˜ [ê·¸ë¦¼ 22]ì™€ ê°™ì´ ì°¨íŠ¸ì— ë‚˜íƒ€ë‚¼ CPU, Memory, I/O ë“± ëª¨ë‹ˆí„°ë§í•  í•­ëª©ë“¤ì˜ <code class="language-plaintext highlighter-rouge">Metric</code>ê³¼ Instance, Group ë“± <code class="language-plaintext highlighter-rouge">Resource íƒ€ì…</code>ì„ ì§€ì •í•˜ê³  ì°¨íŠ¸ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì›í•˜ëŠ” ì°¨íŠ¸ë¥¼ ì¶”ê°€í•˜ê³  ëŒ€ì‹œë³´ë“œë¥¼ í™•ì¸í•˜ë©´ ë‹¤ìŒ [ê·¸ë¦¼ 23]ê³¼ ê°™ì´ monitoring-agentì„ í†µí•´ VM ì¸ìŠ¤í„´ìŠ¤ì˜ Metricë“¤ì„ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_23.png" alt="monitoring_dashboard" width="1000" height="744" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 23] ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ ì™„ì„±</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>ë‹¤ìŒìœ¼ë¡œ ë¡œê¹… ì‹œìŠ¤í…œì€ <strong>[ë¡œê·¸ ê¸°ë¡] - [ë¡œê·¸ ë·°ì–´]</strong> íƒ­ì— ë“¤ì–´ì˜¤ë©´ ë‹¤ìŒ [ê·¸ë¦¼ 24]ì™€ ê°™ì´ logging-agentë¥¼ í†µí•´ ìˆ˜ì§‘ëœ ë¡œê·¸ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_24.png" alt="log_viewer" width="900" height="294" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 24] ë¡œê·¸ ë·°ì–´ í™•ì¸</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_25.png" alt="log_query" width="900" height="316" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 25] ë¡œê·¸ ë·°ì–´ ì¿¼ë¦¬ ë¹Œë”</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>
  </li>
</ul>

<hr />

<h2 id="3-í”„ë¡œì íŠ¸-í…ŒìŠ¤íŠ¸---"><span style="color:purple"><strong>3. í”„ë¡œì íŠ¸ í…ŒìŠ¤íŠ¸</strong></span>   <a name="list3"></a></h2>

<p><br /></p>

<ul>
  <li>
    <p><strong>Cloud SQL ë¡œê¹… í…ŒìŠ¤íŠ¸</strong>   <a name="list3_1"></a></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_26.png" alt="cloudsql_connection_failure" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 26] Cloud SQL ì ‘ì† ì‹¤íŒ¨</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_27.png" alt="cloudsql_log_viewer" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 27] Cloud SQL ì ‘ì† ì‹¤íŒ¨ ë¡œê·¸ ë·°ì–´</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>
  </li>
  <li>
    <p><strong>ì˜¤í† ìŠ¤ì¼€ì¼ë§ ë° ë¶€í•˜í…ŒìŠ¤íŠ¸</strong>   <a name="list3_2"></a></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_28.png" alt="jmeter" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 28] JMeterë¡œ ë¶€í•˜í…ŒìŠ¤íŠ¸</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_29.png" alt="instance_upscale" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 29] ì¸ìŠ¤í„´ìŠ¤ ìë™ í™•ì¥</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_30.png" alt="instance_upscale_monitoring" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 30] ì¸ìŠ¤í„´ìŠ¤ í™•ì¥ ëª¨ë‹ˆí„°ë§</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/static/assets/img/landing/gcp_toyproject_31.png" alt="instance_downscale" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">[ê·¸ë¦¼ 31] ì¸ìŠ¤í„´ìŠ¤ ìë™ ì¶•ì†Œ</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>
:ET